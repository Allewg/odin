<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ODIN GYM - Gimnasio privado en San Bernardo y Talagante. Supera tus límites con entrenamiento personalizado, clases grupales y ambiente sin aglomeraciones.">
    <meta name="keywords" content="gimnasio San Bernardo, gimnasio Talagante, entrenamiento personalizado, clases grupales, CrossFit, nutricionista, kinesiología">
    <title>ODIN GYM - Supera tus límites | Gimnasio Privado San Bernardo y Talagante</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@700&family=Inter:wght@300;400;700;900&display=swap" rel="stylesheet">
    
    <!-- Custom CSS (v2 para forzar recarga) -->
    <link rel="stylesheet" href="assets/styles.css?v=2">
    
    <!-- LightGallery CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.7.2/css/lightgallery-bundle.min.css">
    
    <!-- Supabase JS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="font-inter bg-bg-dark text-white" x-data="appData()">
    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 bg-bg-dark-gray/95 backdrop-blur-md border-b border-primary-gold/20" 
         :class="{'shadow-lg': scrolled}">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-20">
                <!-- Logo -->
                <a href="#home" class="flex items-center space-x-2 group">
                    <i class="fas fa-dumbbell text-primary-gold text-2xl group-hover:scale-110 transition-transform"></i>
                    <span class="font-syncopate text-2xl font-bold text-white">ODIN GYM</span>
                </a>
                
                <!-- Desktop Menu -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="#home" class="nav-link">Inicio</a>
                    <a href="#servicios" class="nav-link">Servicios</a>
                    <a href="#instalaciones" class="nav-link">Instalaciones</a>
                    <a href="#planes" class="nav-link">Planes</a>
                    <a href="#nosotros" class="nav-link">Nosotros</a>
                    <a href="#contacto" class="nav-link">Contacto</a>
                    <button @click="openAccountModal()" class="nav-link">
                        <i class="fas fa-user mr-1"></i>Mi Cuenta
                    </button>
                    <!-- Admin Link (solo visible para admins) -->
                    <button x-show="isAdmin" @click="openAdminPanel()" class="nav-link text-primary-gold">
                        <i class="fas fa-shield-alt mr-1"></i>Admin
                    </button>
                    <a href="#contacto" class="btn-primary">Clase de Regalo</a>
                </div>
                
                <!-- Mobile Menu Button -->
                <button @click="mobileMenuOpen = !mobileMenuOpen" class="md:hidden text-primary-gold">
                    <i :class="mobileMenuOpen ? 'fa-times' : 'fa-bars'" class="fas text-2xl"></i>
                </button>
            </div>
            
            <!-- Mobile Menu -->
            <div x-show="mobileMenuOpen" 
                 x-transition:enter="transition ease-out duration-300"
                 x-transition:enter-start="opacity-0 -translate-y-4"
                 x-transition:enter-end="opacity-100 translate-y-0"
                 x-transition:leave="transition ease-in duration-200"
                 x-transition:leave-start="opacity-100 translate-y-0"
                 x-transition:leave-end="opacity-0 -translate-y-4"
                 class="md:hidden pb-4 space-y-2">
                <a href="#home" @click="mobileMenuOpen = false" class="block py-2 nav-link">Inicio</a>
                <a href="#servicios" @click="mobileMenuOpen = false" class="block py-2 nav-link">Servicios</a>
                <a href="#instalaciones" @click="mobileMenuOpen = false" class="block py-2 nav-link">Instalaciones</a>
                <a href="#planes" @click="mobileMenuOpen = false" class="block py-2 nav-link">Planes</a>
                <a href="#nosotros" @click="mobileMenuOpen = false" class="block py-2 nav-link">Nosotros</a>
                <a href="#contacto" @click="mobileMenuOpen = false" class="block py-2 nav-link">Contacto</a>
                <button @click="mobileMenuOpen = false; openAccountModal()" class="block py-2 nav-link w-full text-left">
                    <i class="fas fa-user mr-1"></i>Mi Cuenta
                </button>
                <!-- Admin Link Mobile (solo visible para admins) -->
                <button x-show="isAdmin" @click="mobileMenuOpen = false; openAdminPanel()" class="block py-2 nav-link w-full text-left text-primary-gold">
                    <i class="fas fa-shield-alt mr-1"></i>Panel Admin
                </button>
                <a href="#contacto" @click="mobileMenuOpen = false" class="block py-2 btn-primary text-center">Clase de Regalo</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="relative min-h-screen flex items-center overflow-hidden pt-20">
        <!-- Background Image -->
        <div class="absolute inset-0 w-full h-full">
            <img src="assets/images/530765447_18285246976275478_2365833631633754549_n.webp" 
                 alt="ODIN GYM - Instalaciones" 
                 class="w-full h-full object-cover"
                 loading="eager">
            <div class="absolute inset-0 bg-gradient-to-b from-bg-dark/80 via-bg-dark/60 to-bg-dark"></div>
        </div>
        
        <!-- Rayo Animado -->
        <div class="absolute inset-0 pointer-events-none" style="z-index: 5;">
            <div class="lightning-bolt"></div>
        </div>
        
        <!-- Content Container -->
        <div class="relative z-10 container mx-auto px-4 md:px-4 py-8 md:py-12">
            <div class="grid lg:grid-cols-2 gap-6 md:gap-8 items-center">
                <!-- Left Side - Text Content -->
                <div class="text-center lg:text-left order-2 lg:order-1">
                    <div class="hero-text-container">
                        <h1 class="font-syncopate text-4xl md:text-5xl lg:text-8xl font-bold mb-4 md:mb-6 text-white drop-shadow-2xl">
                            <span class="text-primary-gold">ODIN</span> GYM
                        </h1>
                        <p class="text-xl md:text-2xl lg:text-3xl font-bold mb-3 md:mb-4 text-primary-gold">Supera tus límites</p>
                        <p class="text-base md:text-lg lg:text-xl mb-6 md:mb-8 text-gray-300 max-w-2xl lg:max-w-none">
                            Gimnasio privado - Sin aglomeración - Entrenamiento personalizado
                        </p>
                        <div class="flex flex-col sm:flex-row gap-3 md:gap-4 justify-center lg:justify-start mb-6 md:mb-8">
                            <a href="#contacto" class="btn-primary text-base md:text-lg px-6 md:px-8 py-3 md:py-4">
                                <i class="fas fa-gift mr-2"></i>Agenda tu Clase de Regalo
                            </a>
                            <a href="#planes" class="btn-secondary text-base md:text-lg px-6 md:px-8 py-3 md:py-4">
                                <i class="fas fa-info-circle mr-2"></i>Conoce nuestros planes
                            </a>
                        </div>
                        
                        <!-- Frase motivacional -->
                        <p class="text-lg md:text-xl lg:text-2xl font-bold text-primary-gold italic">
                            "Los cuerpos del verano se construyen en invierno"
                        </p>
                    </div>
                </div>
                
                <!-- Right Side - Video Vimeo -->
                <div class="relative w-full rounded-xl md:rounded-lg overflow-hidden shadow-2xl border-2 border-primary-gold/30 hero-video-container order-1 lg:order-2">
                    <div class="vp-video-hero">
                        <div class="vp-telecine-hero">
                            <iframe id="hero-vimeo-player"
                                    src="https://player.vimeo.com/video/1147532066?badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479&amp;autoplay=1&amp;loop=1&amp;muted=0&amp;controls=1&amp;byline=0&amp;title=0&amp;portrait=0&amp;transparent=0" 
                                    frameborder="0" 
                                    allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media; web-share" 
                                    referrerpolicy="strict-origin-when-cross-origin" 
                                    class="vp-iframe-hero"
                                    allowfullscreen
                                    style="pointer-events: auto;">
                            </iframe>
                        </div>
                    </div>
                    <!-- Overlay para mejor integración visual -->
                    <div class="absolute inset-0 bg-gradient-to-t from-bg-dark/20 to-transparent pointer-events-none z-0"></div>
                </div>
            </div>
        </div>
        
        <!-- Scroll Indicator -->
        <div class="absolute bottom-10 left-1/2 transform -translate-x-1/2 animate-bounce z-10">
            <i class="fas fa-chevron-down text-primary-gold text-2xl"></i>
        </div>
    </section>

    <!-- Propuesta de Valor -->
    <section class="py-20 bg-bg-light text-bg-dark">
        <div class="container mx-auto px-4">
            <h2 class="font-syncopate text-4xl md:text-5xl font-bold text-center mb-12">
                ¿Por qué <span class="text-primary-gold">ODIN GYM</span>?
            </h2>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="text-center p-6 bg-white rounded-lg shadow-lg">
                    <i class="fas fa-users-slash text-4xl text-secondary-red mb-4"></i>
                    <h3 class="font-bold text-xl mb-3">Sin Aglomeraciones</h3>
                    <p class="text-gray-700">Entrena en un ambiente cómodo y sin esperas. Gimnasio privado con capacidad limitada.</p>
                </div>
                <div class="text-center p-6 bg-white rounded-lg shadow-lg">
                    <i class="fas fa-user-tie text-4xl text-secondary-red mb-4"></i>
                    <h3 class="font-bold text-xl mb-3">Entrenamiento Personalizado</h3>
                    <p class="text-gray-700">Profesores certificados siempre disponibles para guiarte en cada entrenamiento.</p>
                </div>
                <div class="text-center p-6 bg-white rounded-lg shadow-lg">
                    <i class="fas fa-parking text-4xl text-secondary-red mb-4"></i>
                    <h3 class="font-bold text-xl mb-3">Estacionamiento Disponible</h3>
                    <p class="text-gray-700">Ven en auto sin preocupaciones. Estacionamiento gratuito en ambas sedes.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Instalaciones -->
    <section id="instalaciones" class="py-20 bg-bg-dark-gray">
        <div class="container mx-auto px-4">
            <h2 class="font-syncopate text-4xl md:text-5xl font-bold text-center mb-4">
                Nuestras <span class="text-primary-gold">Instalaciones</span>
            </h2>
            <p class="text-center text-gray-300 mb-12 text-lg">Equipamiento de primera calidad en un ambiente único</p>
            
            <!-- Galería con LightGallery -->
            <div id="gallery" class="grid md:grid-cols-2 lg:grid-cols-3 gap-4 mb-12">
                <a href="assets/images/530765447_18285246976275478_2365833631633754549_n.webp" 
                   class="relative overflow-hidden rounded-lg aspect-square group cursor-pointer gallery-item"
                   data-lg-size="1920-1080">
                    <img src="assets/images/530765447_18285246976275478_2365833631633754549_n.webp" 
                         alt="Instalaciones ODIN GYM" 
                         loading="lazy"
                         class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                    <div class="absolute inset-0 bg-bg-dark/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                        <p class="text-white font-bold text-lg"><i class="fas fa-search-plus mr-2"></i>Ver más</p>
                    </div>
                </a>
                <a href="assets/images/531388525_18285246967275478_6404922238873711748_n.webp" 
                   class="relative overflow-hidden rounded-lg aspect-square group cursor-pointer gallery-item"
                   data-lg-size="1920-1080">
                    <img src="assets/images/531388525_18285246967275478_6404922238873711748_n.webp" 
                         alt="Instalaciones ODIN GYM" 
                         loading="lazy"
                         class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                    <div class="absolute inset-0 bg-bg-dark/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                        <p class="text-white font-bold text-lg"><i class="fas fa-search-plus mr-2"></i>Ver más</p>
                    </div>
                </a>
                <a href="assets/images/531625703_18285246958275478_658016422602095601_n.webp" 
                   class="relative overflow-hidden rounded-lg aspect-square group cursor-pointer gallery-item"
                   data-lg-size="1920-1080">
                    <img src="assets/images/531625703_18285246958275478_658016422602095601_n.webp" 
                         alt="Instalaciones ODIN GYM" 
                         loading="lazy"
                         class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                    <div class="absolute inset-0 bg-bg-dark/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                        <p class="text-white font-bold text-lg"><i class="fas fa-search-plus mr-2"></i>Ver más</p>
                    </div>
                </a>
                <a href="assets/images/532955782_18285247030275478_6022958482484093043_n.webp" 
                   class="relative overflow-hidden rounded-lg aspect-square group cursor-pointer gallery-item"
                   data-lg-size="1920-1080">
                    <img src="assets/images/532955782_18285247030275478_6022958482484093043_n.webp" 
                         alt="Instalaciones ODIN GYM" 
                         loading="lazy"
                         class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                    <div class="absolute inset-0 bg-bg-dark/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                        <p class="text-white font-bold text-lg"><i class="fas fa-search-plus mr-2"></i>Ver más</p>
                    </div>
                </a>
                <a href="assets/images/533246651_18285247021275478_6130407677709145498_n.webp" 
                   class="relative overflow-hidden rounded-lg aspect-square group cursor-pointer gallery-item"
                   data-lg-size="1920-1080">
                    <img src="assets/images/533246651_18285247021275478_6130407677709145498_n.webp" 
                         alt="Instalaciones ODIN GYM" 
                         loading="lazy"
                         class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                    <div class="absolute inset-0 bg-bg-dark/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                        <p class="text-white font-bold text-lg"><i class="fas fa-search-plus mr-2"></i>Ver más</p>
                    </div>
                </a>
                <a href="assets/images/534322380_18285246994275478_6026866347423188985_n.webp" 
                   class="relative overflow-hidden rounded-lg aspect-square group cursor-pointer gallery-item"
                   data-lg-size="1920-1080">
                    <img src="assets/images/534322380_18285246994275478_6026866347423188985_n.webp" 
                         alt="Instalaciones ODIN GYM" 
                         loading="lazy"
                         class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                    <div class="absolute inset-0 bg-bg-dark/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                        <p class="text-white font-bold text-lg"><i class="fas fa-search-plus mr-2"></i>Ver más</p>
                    </div>
                </a>
                <a href="assets/images/534385745_18285247012275478_2788377078320180062_n.webp" 
                   class="relative overflow-hidden rounded-lg aspect-square group cursor-pointer gallery-item"
                   data-lg-size="1920-1080">
                    <img src="assets/images/534385745_18285247012275478_2788377078320180062_n.webp" 
                         alt="Instalaciones ODIN GYM" 
                         loading="lazy"
                         class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                    <div class="absolute inset-0 bg-bg-dark/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                        <p class="text-white font-bold text-lg"><i class="fas fa-search-plus mr-2"></i>Ver más</p>
                    </div>
                </a>
                <a href="assets/images/534567014_18285247039275478_4065940519350490656_n.webp" 
                   class="relative overflow-hidden rounded-lg aspect-square group cursor-pointer gallery-item"
                   data-lg-size="1920-1080">
                    <img src="assets/images/534567014_18285247039275478_4065940519350490656_n.webp" 
                         alt="Instalaciones ODIN GYM" 
                         loading="lazy"
                         class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                    <div class="absolute inset-0 bg-bg-dark/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                        <p class="text-white font-bold text-lg"><i class="fas fa-search-plus mr-2"></i>Ver más</p>
                    </div>
                </a>
                <a href="assets/images/535389829_18285247003275478_2718135387424315794_n.webp" 
                   class="relative overflow-hidden rounded-lg aspect-square group cursor-pointer gallery-item"
                   data-lg-size="1920-1080">
                    <img src="assets/images/535389829_18285247003275478_2718135387424315794_n.webp" 
                         alt="Instalaciones ODIN GYM" 
                         loading="lazy"
                         class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110">
                    <div class="absolute inset-0 bg-bg-dark/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                        <p class="text-white font-bold text-lg"><i class="fas fa-search-plus mr-2"></i>Ver más</p>
                    </div>
                </a>
            </div>
            
            <!-- Equipamiento -->
            <div class="bg-bg-dark rounded-lg p-8 mb-12">
                <h3 class="font-syncopate text-3xl font-bold mb-6 text-center text-primary-gold">
                    Equipamiento Disponible
                </h3>
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="text-center">
                        <i class="fas fa-dumbbell text-4xl text-primary-gold mb-3"></i>
                        <p class="text-gray-300">Pesas Libres</p>
                    </div>
                    <div class="text-center">
                        <i class="fas fa-weight text-4xl text-primary-gold mb-3"></i>
                        <p class="text-gray-300">Máquinas de Fuerza</p>
                    </div>
                    <div class="text-center">
                        <i class="fas fa-running text-4xl text-primary-gold mb-3"></i>
                        <p class="text-gray-300">Cardio Equipment</p>
                    </div>
                    <div class="text-center">
                        <i class="fas fa-fire text-4xl text-primary-gold mb-3"></i>
                        <p class="text-gray-300">CrossFit Zone</p>
                    </div>
                </div>
            </div>
            
            <!-- Video de la Comunidad -->
            <div class="grid lg:grid-cols-2 gap-8 items-start">
                <!-- Video Vimeo -->
                <div class="relative w-full rounded-lg overflow-hidden shadow-2xl border-2 border-primary-gold/30">
                    <div class="vp-video-comunidad">
                        <div class="vp-telecine-comunidad">
                            <iframe id="comunidad-vimeo-player"
                                    src="https://player.vimeo.com/video/1147532010?badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479&amp;autoplay=0&amp;loop=1&amp;muted=0&amp;controls=1&amp;byline=0&amp;title=0&amp;portrait=0" 
                                    frameborder="0" 
                                    allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media; web-share" 
                                    referrerpolicy="strict-origin-when-cross-origin" 
                                    class="vp-iframe-comunidad"
                                    allowfullscreen
                                    style="pointer-events: auto;">
                            </iframe>
                        </div>
                    </div>
                    <!-- Overlay para mejor integración visual -->
                    <div class="absolute inset-0 bg-gradient-to-t from-bg-dark/20 to-transparent pointer-events-none z-0"></div>
                </div>
                
                <!-- Contenido adaptado al video -->
                <div class="flex flex-col h-full">
                    <!-- Texto sobre la Comunidad -->
                    <div class="hero-text-container mb-6">
                        <h3 class="font-syncopate text-3xl md:text-4xl font-bold mb-4 text-primary-gold">
                            Nuestra <span class="text-white">Comunidad</span>
                        </h3>
                        <p class="text-base md:text-lg mb-3 text-gray-300 leading-relaxed">
                            En ODIN GYM no solo entrenamos el cuerpo, construimos una <strong class="text-primary-gold">comunidad saludable y unida</strong>. Nuestros miembros se apoyan mutuamente, celebran los logros de cada uno y crean un ambiente positivo donde todos se sienten bienvenidos.
                        </p>
                        <p class="text-base md:text-lg mb-3 text-gray-300 leading-relaxed">
                            Más que un gimnasio, somos una <strong class="text-primary-gold">familia</strong> que comparte valores de superación, respeto y bienestar.
                        </p>
                        <p class="text-base md:text-lg text-gray-300 leading-relaxed">
                            Únete a una comunidad donde cada persona importa y donde juntos <strong class="text-primary-gold">superamos nuestros límites</strong>.
                        </p>
                    </div>
                    
                    <!-- Elementos visuales profesionales -->
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="bg-bg-dark rounded-lg p-4 border border-primary-gold/20 text-center">
                            <div class="w-16 h-16 bg-primary-gold/20 rounded-full flex items-center justify-center mx-auto mb-3">
                                <i class="fas fa-users text-3xl text-primary-gold"></i>
                            </div>
                            <h4 class="font-bold text-white mb-2">Apoyo Mutuo</h4>
                            <p class="text-sm text-gray-400">Todos nos ayudamos a crecer</p>
                        </div>
                        <div class="bg-bg-dark rounded-lg p-4 border border-primary-gold/20 text-center">
                            <div class="w-16 h-16 bg-primary-gold/20 rounded-full flex items-center justify-center mx-auto mb-3">
                                <i class="fas fa-heart text-3xl text-primary-gold"></i>
                            </div>
                            <h4 class="font-bold text-white mb-2">Ambiente Familiar</h4>
                            <p class="text-sm text-gray-400">Te sientes como en casa</p>
                        </div>
                        <div class="bg-bg-dark rounded-lg p-4 border border-primary-gold/20 text-center">
                            <div class="w-16 h-16 bg-primary-gold/20 rounded-full flex items-center justify-center mx-auto mb-3">
                                <i class="fas fa-trophy text-3xl text-primary-gold"></i>
                            </div>
                            <h4 class="font-bold text-white mb-2">Celebramos Logros</h4>
                            <p class="text-sm text-gray-400">Cada victoria cuenta</p>
                        </div>
                        <div class="bg-bg-dark rounded-lg p-4 border border-primary-gold/20 text-center">
                            <div class="w-16 h-16 bg-primary-gold/20 rounded-full flex items-center justify-center mx-auto mb-3">
                                <i class="fas fa-handshake text-3xl text-primary-gold"></i>
                            </div>
                            <h4 class="font-bold text-white mb-2">Respeto</h4>
                            <p class="text-sm text-gray-400">Valoramos a cada miembro</p>
                        </div>
                    </div>
                    
                    <!-- Estadísticas o valores destacados -->
                    <div class="bg-gradient-to-r from-primary-gold/10 to-secondary-mustard/10 rounded-lg p-6 border border-primary-gold/30">
                        <div class="flex items-center justify-between mb-4">
                            <div class="text-center flex-1">
                                <div class="text-3xl font-bold text-primary-gold mb-1">100%</div>
                                <div class="text-sm text-gray-300">Comunidad Activa</div>
                            </div>
                            <div class="w-px h-12 bg-primary-gold/30"></div>
                            <div class="text-center flex-1">
                                <div class="text-3xl font-bold text-primary-gold mb-1">24/7</div>
                                <div class="text-sm text-gray-300">Apoyo Mutuo</div>
                            </div>
                            <div class="w-px h-12 bg-primary-gold/30"></div>
                            <div class="text-center flex-1">
                                <div class="text-3xl font-bold text-primary-gold mb-1">∞</div>
                                <div class="text-sm text-gray-300">Motivación</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Ubicaciones -->
    <section class="py-20 bg-bg-dark-gray">
        <div class="container mx-auto px-4">
            <h2 class="font-syncopate text-4xl md:text-5xl font-bold text-center mb-12">
                Nuestras <span class="text-primary-gold">Sedes</span>
            </h2>
            <div class="grid md:grid-cols-2 gap-8">
                <!-- San Bernardo -->
                <div class="bg-bg-dark rounded-lg overflow-hidden shadow-xl">
                    <div class="p-6">
                        <h3 class="font-syncopate text-2xl font-bold mb-4 text-primary-gold">
                            <i class="fas fa-map-marker-alt mr-2"></i>San Bernardo
                        </h3>
                        <p class="text-gray-300 mb-4">Dirección: [Dirección San Bernardo]</p>
                        <div class="aspect-video rounded-lg overflow-hidden mb-4">
                            <iframe 
                                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3329.1234567890123!2d-70.69812345678901!3d-33.59234567890123!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMzPCsDM1JzMyLjQiUyA3MMKwNDEnNTMuMiJX!5e0!3m2!1ses!2scl!4v1234567890123!5m2!1ses!2scl"
                                width="100%" 
                                height="100%" 
                                style="border:0;" 
                                allowfullscreen="" 
                                loading="lazy" 
                                referrerpolicy="no-referrer-when-downgrade"
                                class="w-full h-full">
                            </iframe>
                        </div>
                        <a href="https://wa.me/56935100120" target="_blank" class="btn-primary w-full text-center">
                            <i class="fab fa-whatsapp mr-2"></i>Contactar por WhatsApp
                        </a>
                    </div>
                </div>
                
                <!-- Talagante -->
                <div class="bg-bg-dark rounded-lg overflow-hidden shadow-xl">
                    <div class="p-6">
                        <h3 class="font-syncopate text-2xl font-bold mb-4 text-primary-gold">
                            <i class="fas fa-map-marker-alt mr-2"></i>Talagante
                        </h3>
                        <p class="text-gray-300 mb-4">Dirección: [Dirección Talagante]</p>
                        <div class="aspect-video rounded-lg overflow-hidden mb-4">
                            <iframe 
                                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3329.1234567890123!2d-70.69812345678901!3d-33.59234567890123!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMzPCsDM1JzMyLjQiUyA3MMKwNDEnNTMuMiJX!5e0!3m2!1ses!2scl!4v1234567890123!5m2!1ses!2scl"
                                width="100%" 
                                height="100%" 
                                style="border:0;" 
                                allowfullscreen="" 
                                loading="lazy" 
                                referrerpolicy="no-referrer-when-downgrade"
                                class="w-full h-full">
                            </iframe>
                        </div>
                        <a href="https://wa.me/56981326755" target="_blank" class="btn-primary w-full text-center">
                            <i class="fab fa-whatsapp mr-2"></i>Contactar por WhatsApp
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Servicios -->
    <section id="servicios" class="py-20 bg-bg-light text-bg-dark">
        <div class="container mx-auto px-4">
            <h2 class="font-syncopate text-4xl md:text-5xl font-bold text-center mb-4">
                Nuestros <span class="text-primary-gold">Servicios</span>
            </h2>
            <p class="text-center text-gray-700 mb-12 text-lg">Planes flexibles adaptados a tus objetivos</p>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Entrenamiento Personalizado -->
                <div class="bg-white rounded-lg shadow-xl overflow-hidden hover:shadow-2xl transition-shadow">
                    <div class="h-48 bg-gradient-to-br from-primary-gold to-secondary-mustard flex items-center justify-center">
                        <i class="fas fa-dumbbell text-6xl text-bg-dark"></i>
                    </div>
                    <div class="p-6">
                        <h3 class="font-bold text-2xl mb-3">Entrenamiento Personalizado</h3>
                        <p class="text-gray-700 mb-4">Sesiones one-on-one con entrenadores certificados. Planes adaptados a tus objetivos específicos.</p>
                        <a href="#contacto" class="text-secondary-red font-bold hover:underline">
                            Más información <i class="fas fa-arrow-right ml-1"></i>
                        </a>
                    </div>
                </div>
                
                <!-- Planes de Gimnasio -->
                <div class="bg-white rounded-lg shadow-xl overflow-hidden hover:shadow-2xl transition-shadow">
                    <div class="h-48 bg-gradient-to-br from-secondary-red to-secondary-red-bright flex items-center justify-center">
                        <i class="fas fa-calendar-alt text-6xl text-white"></i>
                    </div>
                    <div class="p-6">
                        <h3 class="font-bold text-2xl mb-3">Planes de Gimnasio</h3>
                        <p class="text-gray-700 mb-4">Acceso ilimitado a nuestras instalaciones. Incluye plan estudiante con descuento especial.</p>
                        <a href="#planes" class="text-secondary-red font-bold hover:underline">
                            Ver planes <i class="fas fa-arrow-right ml-1"></i>
                        </a>
                    </div>
                </div>
                
                <!-- Clases Grupales -->
                <div class="bg-white rounded-lg shadow-xl overflow-hidden hover:shadow-2xl transition-shadow">
                    <div class="h-48 bg-gradient-to-br from-primary-gold to-secondary-mustard flex items-center justify-center">
                        <i class="fas fa-users text-6xl text-bg-dark"></i>
                    </div>
                    <div class="p-6">
                        <h3 class="font-bold text-2xl mb-3">Clases Grupales</h3>
                        <p class="text-gray-700 mb-4">Strong Vikings, Power Jump, CrossFit. Ambiente motivador y comunitario.</p>
                        <a href="#planes" class="text-secondary-red font-bold hover:underline">
                            Ver horarios <i class="fas fa-arrow-right ml-1"></i>
                        </a>
                    </div>
                </div>
                
                <!-- Nutricionista -->
                <div class="bg-white rounded-lg shadow-xl overflow-hidden hover:shadow-2xl transition-shadow">
                    <div class="h-48 bg-gradient-to-br from-secondary-red to-secondary-red-bright flex items-center justify-center">
                        <i class="fas fa-apple-alt text-6xl text-white"></i>
                    </div>
                    <div class="p-6">
                        <h3 class="font-bold text-2xl mb-3">Nutricionista</h3>
                        <p class="text-gray-700 mb-4">Asesoría nutricional personalizada para complementar tu entrenamiento y alcanzar tus metas.</p>
                        <a href="#contacto" class="text-secondary-red font-bold hover:underline">
                            Agendar consulta <i class="fas fa-arrow-right ml-1"></i>
                        </a>
                    </div>
                </div>
                
                <!-- Kinesiología -->
                <div class="bg-white rounded-lg shadow-xl overflow-hidden hover:shadow-2xl transition-shadow">
                    <div class="h-48 bg-gradient-to-br from-primary-gold to-secondary-mustard flex items-center justify-center">
                        <i class="fas fa-heartbeat text-6xl text-bg-dark"></i>
                    </div>
                    <div class="p-6">
                        <h3 class="font-bold text-2xl mb-3">Kinesiología</h3>
                        <p class="text-gray-700 mb-4">Rehabilitación y prevención de lesiones. Recupera y fortalece tu cuerpo.</p>
                        <a href="#contacto" class="text-secondary-red font-bold hover:underline">
                            Más información <i class="fas fa-arrow-right ml-1"></i>
                        </a>
                    </div>
                </div>
                
                <!-- Sistema DJ -->
                <div class="bg-white rounded-lg shadow-xl overflow-hidden hover:shadow-2xl transition-shadow">
                    <div class="h-48 bg-gradient-to-br from-secondary-red to-secondary-red-bright flex items-center justify-center">
                        <i class="fas fa-music text-6xl text-white"></i>
                    </div>
                    <div class="p-6">
                        <h3 class="font-bold text-2xl mb-3">Sistema DJ Personalizado</h3>
                        <p class="text-gray-700 mb-4">Entrena con la mejor música. Ambiente energético único en la zona.</p>
                        <a href="#instalaciones" class="text-secondary-red font-bold hover:underline">
                            Ver instalaciones <i class="fas fa-arrow-right ml-1"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Planes y Precios -->
    <section id="planes" class="py-20 bg-bg-light text-bg-dark">
        <div class="container mx-auto px-4">
            <h2 class="font-syncopate text-4xl md:text-5xl font-bold text-center mb-4">
                Planes y <span class="text-primary-gold">Precios</span>
            </h2>
            <p class="text-center text-gray-700 mb-12 text-lg">Elige el plan que mejor se adapte a tus objetivos</p>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
                <!-- Plan Estudiante -->
                <div class="bg-white rounded-lg shadow-xl p-8 border-2 border-primary-gold relative">
                    <div class="absolute top-0 right-0 bg-primary-gold text-bg-dark px-4 py-1 rounded-bl-lg font-bold">
                        POPULAR
                    </div>
                    <div class="text-center mb-6">
                        <i class="fas fa-graduation-cap text-5xl text-primary-gold mb-4"></i>
                        <h3 class="font-syncopate text-2xl font-bold mb-2">Plan Estudiante</h3>
                        <div class="text-4xl font-bold text-bg-dark mb-2">
                            $16,000<span class="text-lg text-gray-600">/mes</span>
                        </div>
                    </div>
                    <ul class="space-y-3 mb-6">
                        <li class="flex items-start">
                            <i class="fas fa-check text-primary-gold mr-2 mt-1"></i>
                            <span>Acceso ilimitado al gimnasio</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-primary-gold mr-2 mt-1"></i>
                            <span>Horario extendido</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-primary-gold mr-2 mt-1"></i>
                            <span>Descuento especial para estudiantes</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-primary-gold mr-2 mt-1"></i>
                            <span>Sin permanencia</span>
                        </li>
                    </ul>
                    <a href="#contacto" class="btn-primary w-full text-center block">
                        Contratar Plan
                    </a>
                </div>
                
                <!-- Plan Anual PAC -->
                <div class="bg-white rounded-lg shadow-xl p-8 border-2 border-secondary-red relative">
                    <div class="absolute top-0 right-0 bg-secondary-red text-white px-4 py-1 rounded-bl-lg font-bold">
                        MEJOR VALOR
                    </div>
                    <div class="text-center mb-6">
                        <i class="fas fa-calendar-check text-5xl text-secondary-red mb-4"></i>
                        <h3 class="font-syncopate text-2xl font-bold mb-2">Plan Anual PAC</h3>
                        <div class="text-4xl font-bold text-bg-dark mb-2">
                            $120,000<span class="text-lg text-gray-600">/año</span>
                        </div>
                        <p class="text-sm text-gray-600">Ahorra $72,000 al año</p>
                    </div>
                    <ul class="space-y-3 mb-6">
                        <li class="flex items-start">
                            <i class="fas fa-check text-secondary-red mr-2 mt-1"></i>
                            <span>Acceso ilimitado 12 meses</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-secondary-red mr-2 mt-1"></i>
                            <span>Sin cuota de inscripción</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-secondary-red mr-2 mt-1"></i>
                            <span>Descuento del 37%</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-secondary-red mr-2 mt-1"></i>
                            <span>Pago único o cuotas</span>
                        </li>
                    </ul>
                    <a href="#contacto" class="btn-secondary-red w-full text-center block">
                        Contratar Plan
                    </a>
                </div>
                
                <!-- Clases Grupales -->
                <div class="bg-white rounded-lg shadow-xl p-8 border-2 border-primary-gold">
                    <div class="text-center mb-6">
                        <i class="fas fa-users text-5xl text-primary-gold mb-4"></i>
                        <h3 class="font-syncopate text-2xl font-bold mb-2">Clases Grupales</h3>
                        <div class="text-4xl font-bold text-bg-dark mb-2">
                            $30,000<span class="text-lg text-gray-600">/8 clases</span>
                        </div>
                    </div>
                    <ul class="space-y-3 mb-6">
                        <li class="flex items-start">
                            <i class="fas fa-check text-primary-gold mr-2 mt-1"></i>
                            <span>Strong Vikings</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-primary-gold mr-2 mt-1"></i>
                            <span>Power Jump</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-primary-gold mr-2 mt-1"></i>
                            <span>CrossFit</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check text-primary-gold mr-2 mt-1"></i>
                            <span>Válido por 2 meses</span>
                        </li>
                    </ul>
                    <a href="#contacto" class="btn-primary w-full text-center block">
                        Ver Horarios
                    </a>
                </div>
            </div>
            
            <!-- CTA Clase de Regalo -->
            <div class="mt-12 text-center bg-gradient-to-r from-primary-gold to-secondary-mustard rounded-lg p-8 text-bg-dark">
                <h3 class="font-syncopate text-3xl font-bold mb-4">¿Aún no estás seguro?</h3>
                <p class="text-lg mb-6">Prueba una clase completamente gratis. Sin compromiso, sin tarjeta de crédito.</p>
                <a href="#contacto" class="btn-dark text-lg px-8 py-4 inline-block">
                    <i class="fas fa-gift mr-2"></i>Agenda tu Clase de Regalo
                </a>
            </div>
        </div>
    </section>

    <!-- Testimonios -->
    <section class="py-20 bg-bg-dark-gray">
        <div class="container mx-auto px-4">
            <h2 class="font-syncopate text-4xl md:text-5xl font-bold text-center mb-12">
                Nuestra <span class="text-primary-gold">Comunidad</span>
            </h2>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="bg-bg-dark rounded-lg p-6 shadow-xl">
                    <div class="flex items-center mb-4">
                        <div class="w-16 h-16 bg-primary-gold rounded-full flex items-center justify-center mr-4">
                            <i class="fas fa-user text-2xl text-bg-dark"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-lg">María González</h4>
                            <p class="text-gray-400 text-sm">Miembro desde 2023</p>
                        </div>
                    </div>
                    <p class="text-gray-300 italic">"El mejor gimnasio de la zona. Ambiente familiar, profesores siempre disponibles y sin aglomeraciones. ¡Super recomendado!"</p>
                    <div class="mt-4 text-primary-gold">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                </div>
                <div class="bg-bg-dark rounded-lg p-6 shadow-xl">
                    <div class="flex items-center mb-4">
                        <div class="w-16 h-16 bg-primary-gold rounded-full flex items-center justify-center mr-4">
                            <i class="fas fa-user text-2xl text-bg-dark"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-lg">Carlos Ramírez</h4>
                            <p class="text-gray-400 text-sm">Miembro desde 2022</p>
                        </div>
                    </div>
                    <p class="text-gray-300 italic">"Las clases grupales son increíbles. El ambiente de Strong Vikings es único. He logrado resultados que nunca pensé posibles."</p>
                    <div class="mt-4 text-primary-gold">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                </div>
                <div class="bg-bg-dark rounded-lg p-6 shadow-xl">
                    <div class="flex items-center mb-4">
                        <div class="w-16 h-16 bg-primary-gold rounded-full flex items-center justify-center mr-4">
                            <i class="fas fa-user text-2xl text-bg-dark"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-lg">Ana Martínez</h4>
                            <p class="text-gray-400 text-sm">Miembro desde 2024</p>
                        </div>
                    </div>
                    <p class="text-gray-300 italic">"El plan estudiante es perfecto para mi presupuesto. El gimnasio está siempre limpio y el sistema de DJ hace que entrenar sea divertido."</p>
                    <div class="mt-4 text-primary-gold">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Nosotros -->
    <section id="nosotros" class="py-20 bg-bg-light text-bg-dark">
        <div class="container mx-auto px-4">
            <h2 class="font-syncopate text-4xl md:text-5xl font-bold text-center mb-12">
                Sobre <span class="text-primary-gold">Nosotros</span>
            </h2>
            
            <div class="max-w-4xl mx-auto">
                <!-- Historia -->
                <div class="bg-white rounded-lg shadow-xl p-8 mb-8">
                    <h3 class="font-syncopate text-3xl font-bold mb-6 text-center">Nuestra Historia</h3>
                    <p class="text-gray-700 mb-4 text-lg leading-relaxed">
                        ODIN GYM nació con la visión de crear un espacio único donde la mitología nórdica se encuentra con el fitness moderno. Inspirados por la fuerza y determinación de los guerreros vikingos, hemos construido un gimnasio privado que va más allá del entrenamiento físico.
                    </p>
                    <p class="text-gray-700 mb-4 text-lg leading-relaxed">
                        Ubicados en San Bernardo y Talagante, ofrecemos un ambiente sin aglomeraciones donde cada miembro recibe atención personalizada. Nuestro compromiso es ayudarte a superar tus límites y alcanzar tus objetivos en un ambiente familiar y motivador.
                    </p>
                </div>
                
                <!-- Valores -->
                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-white rounded-lg shadow-lg p-6 text-center">
                        <i class="fas fa-users text-4xl text-secondary-red mb-4"></i>
                        <h4 class="font-bold text-xl mb-3">Comunidad</h4>
                        <p class="text-gray-700">Un ambiente familiar donde todos se apoyan mutuamente.</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-lg p-6 text-center">
                        <i class="fas fa-trophy text-4xl text-secondary-red mb-4"></i>
                        <h4 class="font-bold text-xl mb-3">Superación</h4>
                        <p class="text-gray-700">Te ayudamos a superar tus límites día a día.</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-lg p-6 text-center">
                        <i class="fas fa-heart text-4xl text-secondary-red mb-4"></i>
                        <h4 class="font-bold text-xl mb-3">Ambiente Familiar</h4>
                        <p class="text-gray-700">Un lugar donde te sientes como en casa.</p>
                    </div>
                </div>
                
                <!-- Equipo -->
                <div class="bg-white rounded-lg shadow-xl p-8">
                    <h3 class="font-syncopate text-3xl font-bold mb-6 text-center">Nuestro Equipo</h3>
                    <p class="text-gray-700 mb-6 text-lg text-center">
                        Contamos con entrenadores certificados y profesionales de la salud comprometidos con tu éxito.
                    </p>
                    
                    <!-- Embajadora -->
                    <div class="bg-gradient-to-r from-primary-gold to-secondary-mustard rounded-lg p-6 text-bg-dark text-center">
                        <h4 class="font-syncopate text-2xl font-bold mb-2">Embajadora</h4>
                        <p class="text-xl font-bold mb-2">Tiare Allende</p>
                        <p class="text-gray-800">Representando los valores de fuerza, determinación y comunidad de ODIN GYM</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contacto -->
    <section id="contacto" class="py-20 bg-bg-dark-gray">
        <div class="container mx-auto px-4">
            <h2 class="font-syncopate text-4xl md:text-5xl font-bold text-center mb-12">
                Contáctanos
            </h2>
            
            <div class="grid md:grid-cols-2 gap-8 max-w-6xl mx-auto">
                <!-- Reserva -->
                <div class="bg-bg-dark rounded-lg shadow-xl p-8">
                    <h3 class="font-syncopate text-2xl font-bold mb-6 text-primary-gold">
                        <i class="fas fa-calendar-check mr-2"></i>Reserva tu Clase
                    </h3>
                    <p class="text-gray-300 mb-6">
                        Agenda tu clase de regalo o reserva tu entrenamiento personalizado. Selecciona el servicio que más te interese y elige el horario que mejor se adapte a tu rutina.
                    </p>
                    <div class="space-y-4">
                        <button @click="openAccountModal()" class="btn-primary w-full text-center">
                            <i class="fas fa-gift mr-2"></i>Reservar Clase de Prueba
                        </button>
                        <button @click="openAccountModal()" class="btn-secondary w-full text-center">
                            <i class="fas fa-user mr-2"></i>Ver Mis Reservas
                        </button>
                    </div>
                    <div class="mt-6 p-4 bg-primary-gold/10 rounded-lg border border-primary-gold/30">
                        <p class="text-primary-gold font-bold mb-2">
                            <i class="fas fa-gift mr-2"></i>Clase de Regalo Disponible
                        </p>
                        <p class="text-gray-300 text-sm">
                            Prueba una clase completamente gratis. Sin compromiso, sin tarjeta de crédito.
                        </p>
                    </div>
                </div>
                
                <!-- Información de Contacto -->
                <div class="space-y-6">
                    <div class="bg-bg-dark rounded-lg shadow-xl p-6">
                        <h3 class="font-syncopate text-2xl font-bold mb-4 text-primary-gold">Información de Contacto</h3>
                        <div class="space-y-4">
                            <div class="flex items-start">
                                <i class="fab fa-whatsapp text-2xl text-primary-gold mr-4 mt-1"></i>
                                <div>
                                    <p class="font-bold text-white mb-1">WhatsApp</p>
                                    <a href="https://wa.me/56935100120" target="_blank" class="text-gray-300 hover:text-primary-gold">
                                        +56 9 3510 0120
                                    </a><br>
                                    <a href="https://wa.me/56981326755" target="_blank" class="text-gray-300 hover:text-primary-gold">
                                        +56 9 8132 6755
                                    </a>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <i class="fab fa-instagram text-2xl text-primary-gold mr-4 mt-1"></i>
                                <div>
                                    <p class="font-bold text-white mb-1">Instagram</p>
                                    <a href="https://instagram.com/odingym.cl" target="_blank" class="text-gray-300 hover:text-primary-gold">
                                        @odingym.cl
                                    </a>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <i class="fas fa-map-marker-alt text-2xl text-primary-gold mr-4 mt-1"></i>
                                <div>
                                    <p class="font-bold text-white mb-1">Ubicaciones</p>
                                    <p class="text-gray-300">San Bernardo</p>
                                    <p class="text-gray-300">Talagante</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Horarios -->
                    <div class="bg-bg-dark rounded-lg shadow-xl p-6">
                        <h3 class="font-syncopate text-xl font-bold mb-4 text-primary-gold">Horarios</h3>
                        <div class="space-y-2 text-gray-300">
                            <p><span class="font-bold">Lunes - Viernes:</span> 6:00 - 22:00</p>
                            <p><span class="font-bold">Sábado:</span> 8:00 - 20:00</p>
                            <p><span class="font-bold">Domingo:</span> 9:00 - 18:00</p>
                        </div>
                    </div>
                    
                    <!-- CTA WhatsApp -->
                    <a href="https://wa.me/56935100120?text=Hola,%20me%20interesa%20agendar%20una%20clase%20de%20regalo" 
                       target="_blank" 
                       class="block bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold py-4 px-6 rounded-lg text-center transition-all shadow-lg">
                        <i class="fab fa-whatsapp mr-2"></i>Habla con nosotros por WhatsApp
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal Mi Cuenta -->
    <div x-data="cuentaData()" 
         x-show="modalOpen" 
         x-cloak
         @keydown.escape.window="closeModal()"
         class="fixed inset-0 z-50 overflow-y-auto"
         style="display: none;"
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="transition ease-in duration-200"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0">
        <!-- Overlay -->
        <div class="fixed inset-0 bg-black bg-opacity-75" @click="closeModal()"></div>
        
        <!-- Modal Content -->
        <div class="flex items-center justify-center min-h-screen px-4 py-8">
            <div class="relative bg-bg-dark-gray rounded-lg shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-y-auto"
                 @click.stop>
                <!-- Close Button -->
                <button @click="closeModal()" 
                        class="absolute top-4 right-4 text-gray-400 hover:text-white z-10">
                    <i class="fas fa-times text-2xl"></i>
                </button>
                
                <div class="p-6 md:p-8">
                    <h2 class="font-syncopate text-3xl md:text-4xl font-bold text-center mb-8">
                        Mi <span class="text-primary-gold">Cuenta</span>
                    </h2>
                    
                    <!-- Formulario de cambio de contraseña (desde enlace de recuperación) - Se muestra primero si está activo -->
                    <div x-show="showPasswordReset" 
                         x-transition:enter="transition ease-out duration-200"
                         x-transition:enter-start="opacity-0 -translate-y-2"
                         x-transition:enter-end="opacity-100 translate-y-0"
                         class="max-w-2xl mx-auto mb-8">
                        <div class="bg-bg-dark rounded-lg shadow-xl p-8">
                            <div class="mb-6">
                                <h3 class="text-2xl font-bold text-white mb-2">
                                    <i class="fas fa-key mr-2 text-primary-gold"></i>Establecer Nueva Contraseña
                                </h3>
                                <p class="text-gray-400 text-sm">
                                    Ingresa tu nueva contraseña. Debe tener al menos 6 caracteres.
                                </p>
                            </div>
                            <form @submit.prevent="handlePasswordResetSubmit()" class="space-y-4">
                                <div>
                                    <label class="block text-gray-300 mb-2">Nueva Contraseña</label>
                                    <input type="password" 
                                           x-model="passwordResetForm.newPassword" 
                                           required 
                                           minlength="6"
                                           class="w-full px-4 py-3 bg-bg-dark-gray border border-gray-600 rounded-lg text-white focus:outline-none focus:border-primary-gold">
                                    <p class="text-gray-500 text-xs mt-1">Mínimo 6 caracteres</p>
                                </div>
                                <div>
                                    <label class="block text-gray-300 mb-2">Confirmar Contraseña</label>
                                    <input type="password" 
                                           x-model="passwordResetForm.confirmPassword" 
                                           required 
                                           minlength="6"
                                           class="w-full px-4 py-3 bg-bg-dark-gray border border-gray-600 rounded-lg text-white focus:outline-none focus:border-primary-gold">
                                </div>
                                <button type="submit" 
                                        :disabled="passwordResetLoading" 
                                        class="btn-primary w-full">
                                    <span x-show="!passwordResetLoading">
                                        <i class="fas fa-save mr-2"></i>Actualizar Contraseña
                                    </span>
                                    <span x-show="passwordResetLoading">
                                        <i class="fas fa-spinner fa-spin mr-2"></i>Procesando...
                                    </span>
                                </button>
                            </form>
                            
                            <!-- Mensaje de cambio de contraseña -->
                            <div x-show="passwordResetMessage" 
                                 :class="passwordResetSuccess ? 'bg-green-500/20 text-green-400 border-green-500/50' : 'bg-red-500/20 text-red-400 border-red-500/50'"
                                 class="mt-4 p-4 rounded-lg border text-sm" 
                                 x-text="passwordResetMessage">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Usuario no logueado: Login/Registro -->
                    <div x-show="!user && !showPasswordReset" class="max-w-2xl mx-auto">
                        <div class="bg-bg-dark rounded-lg shadow-xl p-8">
                            <!-- Tabs -->
                            <div class="flex border-b border-gray-700 mb-6">
                                <button @click="authTab = 'login'" 
                                        :class="authTab === 'login' ? 'border-primary-gold text-primary-gold' : 'border-transparent text-gray-400'"
                                        class="flex-1 py-3 px-4 border-b-2 font-bold transition-colors">
                                    Iniciar Sesión
                                </button>
                                <button @click="authTab = 'signup'" 
                                        :class="authTab === 'signup' ? 'border-primary-gold text-primary-gold' : 'border-transparent text-gray-400'"
                                        class="flex-1 py-3 px-4 border-b-2 font-bold transition-colors">
                                    Registrarse
                                </button>
                            </div>
                            
                            <!-- Login Form -->
                            <div x-show="authTab === 'login'">
                                <!-- Formulario de recuperación de contraseña -->
                                <div x-show="showForgotPassword" 
                                     x-transition:enter="transition ease-out duration-200"
                                     x-transition:enter-start="opacity-0 -translate-y-2"
                                     x-transition:enter-end="opacity-100 translate-y-0"
                                     class="space-y-4">
                                    <div class="flex items-center mb-4">
                                        <button @click="showForgotPassword = false; forgotPasswordMessage = ''" 
                                                class="text-gray-400 hover:text-white mr-2">
                                            <i class="fas fa-arrow-left"></i>
                                        </button>
                                        <h4 class="text-lg font-bold text-white">Recuperar Contraseña</h4>
                                    </div>
                                    <p class="text-gray-400 text-sm mb-4">
                                        Ingresa tu email y te enviaremos un enlace para restablecer tu contraseña.
                                    </p>
                                    <form @submit.prevent="handleForgotPasswordSubmit()" class="space-y-4">
                                        <div>
                                            <label class="block text-gray-300 mb-2">Email</label>
                                            <input type="email" 
                                                   x-model="forgotPasswordForm.email" 
                                                   required 
                                                   class="w-full px-4 py-3 bg-bg-dark-gray border border-gray-600 rounded-lg text-white focus:outline-none focus:border-primary-gold">
                                        </div>
                                        <button type="submit" 
                                                :disabled="forgotPasswordLoading" 
                                                class="btn-primary w-full">
                                            <span x-show="!forgotPasswordLoading">
                                                <i class="fas fa-paper-plane mr-2"></i>Enviar Enlace de Recuperación
                                            </span>
                                            <span x-show="forgotPasswordLoading">
                                                <i class="fas fa-spinner fa-spin mr-2"></i>Enviando...
                                            </span>
                                        </button>
                                    </form>
                                    
                                    <!-- Mensaje de recuperación -->
                                    <div x-show="forgotPasswordMessage" 
                                         :class="forgotPasswordSuccess ? 'bg-green-500/20 text-green-400 border-green-500/50' : 'bg-red-500/20 text-red-400 border-red-500/50'"
                                         class="p-4 rounded-lg border text-sm" 
                                         x-text="forgotPasswordMessage">
                                    </div>
                                </div>
                                
                                <!-- Formulario de login normal -->
                                <div x-show="!showForgotPassword">
                                    <form @submit.prevent="handleLoginSubmit()" class="space-y-4">
                                        <div>
                                            <label class="block text-gray-300 mb-2">Email</label>
                                            <input type="email" x-model="loginForm.email" required 
                                                   class="w-full px-4 py-3 bg-bg-dark-gray border border-gray-600 rounded-lg text-white focus:outline-none focus:border-primary-gold">
                                        </div>
                                        <div>
                                            <label class="block text-gray-300 mb-2">Contraseña</label>
                                            <input type="password" x-model="loginForm.password" required 
                                                   class="w-full px-4 py-3 bg-bg-dark-gray border border-gray-600 rounded-lg text-white focus:outline-none focus:border-primary-gold">
                                        </div>
                                        <div class="text-right">
                                            <button type="button" 
                                                    @click="showForgotPassword = true; forgotPasswordForm.email = loginForm.email || ''" 
                                                    class="text-primary-gold hover:underline text-sm">
                                                ¿Olvidaste tu contraseña?
                                            </button>
                                        </div>
                                        <button type="submit" :disabled="authLoading" class="btn-primary w-full">
                                            <span x-show="!authLoading">Iniciar Sesión</span>
                                            <span x-show="authLoading"><i class="fas fa-spinner fa-spin mr-2"></i>Procesando...</span>
                                        </button>
                                    </form>
                                    
                                    <div class="mt-4 text-center">
                                        <button @click="handleMagicLinkSubmit()" :disabled="authLoading" class="text-primary-gold hover:underline">
                                            O usa un enlace mágico (sin contraseña)
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Signup Form -->
                            <div x-show="authTab === 'signup'">
                                <form @submit.prevent="handleSignupSubmit()" class="space-y-4">
                                    <div>
                                        <label class="block text-gray-300 mb-2">Email</label>
                                        <input type="email" x-model="signupForm.email" required 
                                               class="w-full px-4 py-3 bg-bg-dark-gray border border-gray-600 rounded-lg text-white focus:outline-none focus:border-primary-gold">
                                    </div>
                                    <div>
                                        <label class="block text-gray-300 mb-2">Contraseña</label>
                                        <input type="password" x-model="signupForm.password" required minlength="6"
                                               class="w-full px-4 py-3 bg-bg-dark-gray border border-gray-600 rounded-lg text-white focus:outline-none focus:border-primary-gold">
                                        <p class="text-gray-500 text-sm mt-1">Mínimo 6 caracteres</p>
                                    </div>
                                    <button type="submit" :disabled="authLoading" class="btn-primary w-full">
                                        <span x-show="!authLoading">Registrarse</span>
                                        <span x-show="authLoading"><i class="fas fa-spinner fa-spin mr-2"></i>Procesando...</span>
                                    </button>
                                </form>
                            </div>
                            
                            <!-- Mensajes -->
                            <div x-show="authMessage" 
                                 :class="authSuccess ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'"
                                 class="mt-4 p-4 rounded-lg" x-text="authMessage">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Usuario logueado: Perfil, Reserva y Mis Reservas -->
                    <div x-show="user && !showPasswordReset" class="max-w-6xl mx-auto">
                        <div class="grid md:grid-cols-3 gap-8">
                            <!-- Perfil -->
                            <div class="bg-bg-dark rounded-lg shadow-xl p-8">
                                <h3 class="font-syncopate text-2xl font-bold mb-6 text-primary-gold">
                                    <i class="fas fa-user mr-2"></i>Mi Perfil
                                </h3>
                                <div class="space-y-4">
                                    <div>
                                        <p class="text-gray-400 text-sm">Email</p>
                                        <p class="text-white font-bold" x-text="user?.email"></p>
                                    </div>
                                    <div>
                                        <p class="text-gray-400 text-sm">Usuario desde</p>
                                        <p class="text-white" x-text="formatDate(user?.created_at)"></p>
                                    </div>
                                    
                                    <!-- Cambiar Contraseña -->
                                    <div class="mt-6 pt-6 border-t border-gray-700">
                                        <button @click="showChangePassword = !showChangePassword" 
                                                class="w-full text-left text-primary-gold hover:text-primary-gold/80 transition-colors mb-4">
                                            <i class="fas fa-lock mr-2"></i>
                                            <span x-text="showChangePassword ? 'Ocultar cambio de contraseña' : 'Cambiar contraseña'"></span>
                                            <i :class="showChangePassword ? 'fa-chevron-up' : 'fa-chevron-down'" 
                                               class="fas float-right mt-1"></i>
                                        </button>
                                        
                                        <div x-show="showChangePassword" 
                                             x-transition:enter="transition ease-out duration-200"
                                             x-transition:enter-start="opacity-0 -translate-y-2"
                                             x-transition:enter-end="opacity-100 translate-y-0"
                                             class="space-y-4">
                                            <form @submit.prevent="handleChangePasswordSubmit()" class="space-y-4">
                                                <div>
                                                    <label class="block text-gray-300 mb-2 text-sm">Nueva Contraseña</label>
                                                    <input type="password" 
                                                           x-model="changePasswordForm.newPassword" 
                                                           required 
                                                           minlength="6"
                                                           class="w-full px-4 py-2 bg-bg-dark-gray border border-gray-600 rounded-lg text-white focus:outline-none focus:border-primary-gold text-sm">
                                                    <p class="text-gray-500 text-xs mt-1">Mínimo 6 caracteres</p>
                                                </div>
                                                <div>
                                                    <label class="block text-gray-300 mb-2 text-sm">Confirmar Contraseña</label>
                                                    <input type="password" 
                                                           x-model="changePasswordForm.confirmPassword" 
                                                           required 
                                                           minlength="6"
                                                           class="w-full px-4 py-2 bg-bg-dark-gray border border-gray-600 rounded-lg text-white focus:outline-none focus:border-primary-gold text-sm">
                                                </div>
                                                <button type="submit" 
                                                        :disabled="changePasswordLoading" 
                                                        class="btn-primary w-full text-sm py-2">
                                                    <span x-show="!changePasswordLoading">
                                                        <i class="fas fa-save mr-2"></i>Actualizar Contraseña
                                                    </span>
                                                    <span x-show="changePasswordLoading">
                                                        <i class="fas fa-spinner fa-spin mr-2"></i>Procesando...
                                                    </span>
                                                </button>
                                            </form>
                                            
                                            <!-- Mensaje de cambio de contraseña -->
                                            <div x-show="changePasswordMessage" 
                                                 :class="changePasswordSuccess ? 'bg-green-500/20 text-green-400 border-green-500/50' : 'bg-red-500/20 text-red-400 border-red-500/50'"
                                                 class="p-3 rounded-lg border text-sm" 
                                                 x-text="changePasswordMessage">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <button @click="handleLogoutClick()" class="btn-secondary w-full mt-6">
                                        <i class="fas fa-sign-out-alt mr-2"></i>Cerrar Sesión
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Reservar Clase de Prueba -->
                            <div class="bg-bg-dark rounded-lg shadow-xl p-8 md:col-span-2">
                                <h3 class="font-syncopate text-2xl font-bold mb-6 text-primary-gold">
                                    <i class="fas fa-gift mr-2"></i>Reservar Clase de Prueba
                                </h3>
                                
                                <!-- Estado de carga inicial -->
                                <div x-show="calendarLoading" class="text-center py-12">
                                    <i class="fas fa-spinner fa-spin text-4xl text-primary-gold mb-4"></i>
                                    <p class="text-gray-400">Cargando horarios disponibles...</p>
                                </div>
                                
                                <!-- Error de conexión -->
                                <div x-show="calendarError && !calendarLoading" class="text-center py-12">
                                    <i class="fas fa-exclamation-triangle text-4xl text-yellow-400 mb-4"></i>
                                    <p class="text-yellow-400 mb-4" x-text="calendarError"></p>
                                    <div class="space-x-2">
                                        <button @click="loadClasePruebaSlots()" class="btn-secondary text-sm py-2 px-4">
                                            <i class="fas fa-redo mr-2"></i>Reintentar
                                        </button>
                                        <a href="https://wa.me/56935100120?text=Hola,%20quiero%20reservar%20mi%20clase%20de%20prueba" 
                                           target="_blank" 
                                           class="btn-primary text-sm py-2 px-4 inline-block">
                                            <i class="fab fa-whatsapp mr-2"></i>Contactar por WhatsApp
                                        </a>
                                    </div>
                                </div>
                                
                                <!-- Sin slots disponibles -->
                                <div x-show="!calendarLoading && !calendarError && slotsCount === 0" class="text-center py-12">
                                    <i class="fas fa-calendar-times text-4xl text-gray-500 mb-4"></i>
                                    <p class="text-gray-400 mb-2">No hay horarios disponibles en este momento.</p>
                                    <p class="text-gray-500 text-sm">Por favor, intenta más tarde o contáctanos por WhatsApp.</p>
                                </div>
                                
                                <!-- Calendario (visible solo cuando hay slots) -->
                                <div x-show="!calendarLoading && !calendarError && slotsCount > 0" class="mb-6">
                                    <p class="text-gray-400 text-sm mb-4">
                                        <i class="fas fa-info-circle mr-1"></i>
                                        Selecciona un día para ver los horarios disponibles
                                    </p>
                                    <div id="calendar" class="mb-6"></div>
                                    
                                    <!-- Panel de selección de horario -->
                                    <div x-show="selectedDate && availableHoursForDay.length > 0" 
                                         x-transition:enter="transition ease-out duration-200"
                                         x-transition:enter-start="opacity-0 -translate-y-2"
                                         x-transition:enter-end="opacity-100 translate-y-0"
                                         class="mt-6 p-4 bg-bg-dark-gray rounded-lg border border-gray-700">
                                        <h4 class="font-bold text-lg mb-3 text-white">
                                            <i class="fas fa-clock mr-2 text-primary-gold"></i>
                                            Horarios disponibles para <span x-text="formatDate(selectedDate)" class="text-primary-gold"></span>
                                        </h4>
                                        <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2 mb-4">
                                            <template x-for="hour in availableHoursForDay" :key="hour.id">
                                                <button @click="selectSlot(hour)" 
                                                        :class="selectedSlot?.id === hour.id ? 'bg-primary-gold text-black' : 'bg-gray-700 hover:bg-gray-600 text-white'"
                                                        class="px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                                                    <span x-text="formatTime(hour.date_time)"></span>
                                                </button>
                                            </template>
                                        </div>
                                    </div>
                                    
                                    <!-- Información del slot seleccionado -->
                                    <div x-show="selectedSlot" 
                                         x-transition:enter="transition ease-out duration-200"
                                         class="mt-6 p-4 bg-primary-gold/10 rounded-lg border border-primary-gold">
                                        <h4 class="font-bold text-lg mb-2 text-white">
                                            <i class="fas fa-check-circle mr-2 text-primary-gold"></i>Confirmar reserva:
                                        </h4>
                                        <p class="text-gray-300 mb-4">
                                            <i class="fas fa-calendar mr-2"></i><span x-text="formatDate(selectedSlot?.date_time)"></span>
                                            <span class="mx-2">|</span>
                                            <i class="fas fa-clock mr-2"></i><span x-text="formatTime(selectedSlot?.date_time)"></span>
                                        </p>
                                        <button @click="confirmBooking()" 
                                                :disabled="bookingLoading"
                                                class="btn-primary">
                                            <span x-show="!bookingLoading">
                                                <i class="fas fa-check mr-2"></i>Confirmar Reserva
                                            </span>
                                            <span x-show="bookingLoading">
                                                <i class="fas fa-spinner fa-spin mr-2"></i>Procesando...
                                            </span>
                                        </button>
                                    </div>
                                    
                                    <!-- Mensajes de error/éxito -->
                                    <div x-show="bookingMessage" 
                                         :class="bookingSuccess ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'"
                                         class="mt-4 p-4 rounded-lg" x-text="bookingMessage">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Mis Reservas -->
                        <div class="mt-8">
                            <div class="bg-bg-dark rounded-lg shadow-xl p-8">
                                <h3 class="font-syncopate text-2xl font-bold mb-6 text-primary-gold">
                                    <i class="fas fa-calendar-check mr-2"></i>Mis Reservas
                                </h3>
                                
                                <div x-show="loadingBookings" class="text-center py-8">
                                    <i class="fas fa-spinner fa-spin text-3xl text-primary-gold"></i>
                                </div>
                                
                                <div x-show="!loadingBookings && bookings.length === 0" class="text-center py-8 text-gray-400">
                                    <i class="fas fa-calendar-times text-4xl mb-4"></i>
                                    <p>No tienes reservas activas</p>
                                </div>
                                
                                <div x-show="!loadingBookings && bookings.length > 0" class="space-y-4">
                                    <template x-for="booking in bookings" :key="booking.id">
                                        <div class="bg-bg-dark-gray rounded-lg p-4 border border-gray-700">
                                            <div class="flex justify-between items-start mb-2">
                                                <div>
                                                    <p class="font-bold text-white" x-text="booking.services?.name || 'Clase de Prueba'"></p>
                                                    <p class="text-gray-400 text-sm" x-text="formatDate(booking.slots?.date_time) + ' - ' + formatTime(booking.slots?.date_time)"></p>
                                                </div>
                                                <span class="bg-green-500 text-white text-xs px-2 py-1 rounded" x-text="booking.status"></span>
                                            </div>
                                            <button @click="cancelBookingClick(booking.id)" 
                                                    class="text-red-400 hover:text-red-300 text-sm mt-2">
                                                <i class="fas fa-times mr-1"></i>Cancelar
                                            </button>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Panel de Administración (solo visible para admins) -->
                        <div x-show="isAdmin" id="admin-panel" class="mt-8">
                            <div class="bg-bg-dark rounded-lg shadow-xl p-8 border border-primary-gold/30">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="font-syncopate text-2xl font-bold text-primary-gold">
                                        <i class="fas fa-shield-alt mr-2"></i>Panel de Administración
                                    </h3>
                                    <button @click="loadAdminData()" 
                                            :disabled="adminLoading"
                                            class="btn-secondary text-sm py-2 px-4">
                                        <i :class="adminLoading ? 'fa-spinner fa-spin' : 'fa-sync'" class="fas mr-2"></i>
                                        Actualizar
                                    </button>
                                </div>
                                
                                <!-- Estadísticas -->
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                                    <div class="bg-bg-dark-gray rounded-lg p-4 text-center border border-gray-700">
                                        <p class="text-3xl font-bold text-primary-gold" x-text="adminStats.total || 0"></p>
                                        <p class="text-gray-400 text-sm">Total Reservas</p>
                                    </div>
                                    <div class="bg-bg-dark-gray rounded-lg p-4 text-center border border-green-500/30">
                                        <p class="text-3xl font-bold text-green-400" x-text="adminStats.confirmed || 0"></p>
                                        <p class="text-gray-400 text-sm">Confirmadas</p>
                                    </div>
                                    <div class="bg-bg-dark-gray rounded-lg p-4 text-center border border-blue-500/30">
                                        <p class="text-3xl font-bold text-blue-400" x-text="adminStats.upcoming || 0"></p>
                                        <p class="text-gray-400 text-sm">Próximas</p>
                                    </div>
                                    <div class="bg-bg-dark-gray rounded-lg p-4 text-center border border-yellow-500/30">
                                        <p class="text-3xl font-bold text-yellow-400" x-text="adminStats.thisWeek || 0"></p>
                                        <p class="text-gray-400 text-sm">Esta Semana</p>
                                    </div>
                                </div>
                                
                                <!-- Filtros -->
                                <div class="flex flex-wrap gap-4 mb-6">
                                    <div class="flex items-center space-x-2">
                                        <label class="text-gray-400 text-sm">Estado:</label>
                                        <select x-model="adminFilter.status" 
                                                @change="loadAdminBookings()"
                                                class="bg-bg-dark-gray border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:border-primary-gold">
                                            <option value="">Todos</option>
                                            <option value="confirmed">Confirmadas</option>
                                            <option value="cancelled">Canceladas</option>
                                            <option value="completed">Completadas</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <!-- Tabla de reservas -->
                                <div class="overflow-x-auto">
                                    <div x-show="adminLoading" class="text-center py-8">
                                        <i class="fas fa-spinner fa-spin text-3xl text-primary-gold"></i>
                                    </div>
                                    
                                    <div x-show="!adminLoading && adminBookings.length === 0" class="text-center py-8 text-gray-400">
                                        <i class="fas fa-inbox text-4xl mb-4"></i>
                                        <p>No hay reservas para mostrar</p>
                                    </div>
                                    
                                    <table x-show="!adminLoading && adminBookings.length > 0" class="w-full text-sm">
                                        <thead>
                                            <tr class="text-left border-b border-gray-700">
                                                <th class="pb-3 text-primary-gold font-semibold">Fecha/Hora</th>
                                                <th class="pb-3 text-primary-gold font-semibold">Servicio</th>
                                                <th class="pb-3 text-primary-gold font-semibold">Usuario</th>
                                                <th class="pb-3 text-primary-gold font-semibold">Estado</th>
                                                <th class="pb-3 text-primary-gold font-semibold">Acciones</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-gray-700">
                                            <template x-for="booking in adminBookings" :key="booking.id">
                                                <tr class="hover:bg-bg-dark-gray/50 transition-colors">
                                                    <td class="py-3">
                                                        <div class="text-white" x-text="formatDate(booking.slots?.date_time)"></div>
                                                        <div class="text-gray-400 text-xs" x-text="formatTime(booking.slots?.date_time)"></div>
                                                    </td>
                                                    <td class="py-3 text-white" x-text="booking.services?.name || 'N/A'"></td>
                                                    <td class="py-3">
                                                        <div class="text-white text-xs font-mono" x-text="booking.user_id?.substring(0, 8) + '...'"></div>
                                                    </td>
                                                    <td class="py-3">
                                                        <span :class="{
                                                            'bg-green-500/20 text-green-400 border-green-500/50': booking.status === 'confirmed',
                                                            'bg-red-500/20 text-red-400 border-red-500/50': booking.status === 'cancelled',
                                                            'bg-blue-500/20 text-blue-400 border-blue-500/50': booking.status === 'completed'
                                                        }" class="px-2 py-1 rounded text-xs border" x-text="booking.status"></span>
                                                    </td>
                                                    <td class="py-3">
                                                        <div class="flex items-center space-x-2">
                                                            <button x-show="booking.status === 'confirmed'" 
                                                                    @click="markAsCompleted(booking.id)"
                                                                    class="text-blue-400 hover:text-blue-300 text-xs px-2 py-1 border border-blue-400/50 rounded hover:bg-blue-500/10 transition-colors">
                                                                <i class="fas fa-check mr-1"></i>Completar
                                                            </button>
                                                            <button x-show="booking.status === 'confirmed'" 
                                                                    @click="adminCancelBooking(booking.id)"
                                                                    class="text-red-400 hover:text-red-300 text-xs px-2 py-1 border border-red-400/50 rounded hover:bg-red-500/10 transition-colors">
                                                                <i class="fas fa-times mr-1"></i>Cancelar
                                                            </button>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </template>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-bg-dark py-12 border-t border-gray-800">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-4 gap-8 mb-8">
                <div>
                    <h4 class="font-syncopate text-xl font-bold mb-4 text-primary-gold">ODIN GYM</h4>
                    <p class="text-gray-400 mb-4">Supera tus límites</p>
                    <div class="flex space-x-4">
                        <a href="https://instagram.com/odingym.cl" target="_blank" class="text-gray-400 hover:text-primary-gold text-xl">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://wa.me/56935100120" target="_blank" class="text-gray-400 hover:text-primary-gold text-xl">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </div>
                </div>
                <div>
                    <h5 class="font-bold mb-4 text-white">Enlaces</h5>
                    <ul class="space-y-2">
                        <li><a href="#home" class="text-gray-400 hover:text-primary-gold">Inicio</a></li>
                        <li><a href="#servicios" class="text-gray-400 hover:text-primary-gold">Servicios</a></li>
                        <li><a href="#instalaciones" class="text-gray-400 hover:text-primary-gold">Instalaciones</a></li>
                        <li><a href="#planes" class="text-gray-400 hover:text-primary-gold">Planes</a></li>
                    </ul>
                </div>
                <div>
                    <h5 class="font-bold mb-4 text-white">Información</h5>
                    <ul class="space-y-2">
                        <li><a href="#nosotros" class="text-gray-400 hover:text-primary-gold">Nosotros</a></li>
                        <li><a href="#contacto" class="text-gray-400 hover:text-primary-gold">Contacto</a></li>
                        <li><a href="#planes" class="text-gray-400 hover:text-primary-gold">Precios</a></li>
                    </ul>
                </div>
                <div>
                    <h5 class="font-bold mb-4 text-white">Contacto</h5>
                    <ul class="space-y-2 text-gray-400">
                        <li><i class="fab fa-whatsapp mr-2"></i>+56 9 3510 0120</li>
                        <li><i class="fab fa-whatsapp mr-2"></i>+56 9 8132 6755</li>
                        <li><i class="fab fa-instagram mr-2"></i>@odingym.cl</li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-800 pt-8 text-center text-gray-400">
                <p>&copy; 2024 ODIN GYM. Todos los derechos reservados. | San Bernardo y Talagante, Chile</p>
            </div>
        </div>
    </footer>

    <!-- WhatsApp Floating Button -->
    <a href="https://wa.me/56935100120?text=Hola,%20me%20interesa%20conocer%20más%20sobre%20ODIN%20GYM" 
       target="_blank" 
       class="fixed bottom-6 right-6 bg-green-500 hover:bg-green-600 text-white rounded-full w-16 h-16 flex items-center justify-center shadow-2xl z-50 transition-all hover:scale-110 animate-pulse">
        <i class="fab fa-whatsapp text-3xl"></i>
    </a>

    <!-- Vimeo Player API -->
    <script src="https://player.vimeo.com/api/player.js"></script>
    
    <!-- Supabase Integration (v6 para forzar recarga de cache) -->
    <script src="assets/supabase.js?v=6"></script>
    
    <!-- FullCalendar JS -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
    
    <!-- LightGallery JS -->
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.2/lightgallery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.2/plugins/thumbnail/lg-thumbnail.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.2/plugins/zoom/lg-zoom.min.js"></script>
    
    <!-- Alpine.js Data -->
    <script>
        function appData() {
            return {
                mobileMenuOpen: false,
                scrolled: false,
                isAdmin: false,
                user: null,
                
                async init() {
                    console.log('appData init() comenzando...');
                    
                    // Scroll detection
                    window.addEventListener('scroll', () => {
                        this.scrolled = window.scrollY > 50;
                    });
                    
                    // Smooth scroll for anchor links (except modal triggers)
                    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                        anchor.addEventListener('click', function (e) {
                            const href = this.getAttribute('href');
                            // No prevenir default si es un enlace a modal
                            if (href === '#mi-cuenta') {
                                return;
                            }
                            e.preventDefault();
                            const target = document.querySelector(href);
                            if (target) {
                                target.scrollIntoView({
                                    behavior: 'smooth',
                                    block: 'start'
                                });
                            }
                        });
                    });
                    
                    // Esperar a que Supabase esté disponible
                    console.log('appData - esperando Supabase...');
                    await this.waitForSupabase();
                    console.log('appData - Supabase disponible:', !!window.odinGymSupabase);
                    
                    // Inicializar Supabase
                    await window.odinGymSupabase?.initSupabase();
                    
                    // Verificar estado de admin
                    console.log('appData - verificando admin...');
                    await this.checkAdminStatus();
                    console.log('appData init COMPLETADO - isAdmin:', this.isAdmin, 'user:', this.user?.email);
                    
                    // Escuchar cambios de autenticación
                    window.odinGymSupabase?.onAuthStateChange(async (event, session) => {
                        console.log('appData - auth change event:', event);
                        this.user = session?.user || null;
                        await this.checkAdminStatus();
                        console.log('Auth changed - isAdmin:', this.isAdmin);
                    });
                },
                
                async waitForSupabase() {
                    // Esperar hasta 3 segundos a que Supabase esté disponible
                    for (let i = 0; i < 30; i++) {
                        if (window.odinGymSupabase) return;
                        await new Promise(r => setTimeout(r, 100));
                    }
                    console.warn('Supabase no disponible después de 3 segundos');
                },
                
                async checkAdminStatus() {
                    console.log('checkAdminStatus() - iniciando...');
                    const adminEmails = ['allewmella@gmail.com', 'admin@odingym.cl'];
                    
                    try {
                        // Intentar obtener el email de localStorage directamente
                        const storageKey = 'sb-fdzhfflvmhwcbzzrqent-auth-token';
                        const stored = localStorage.getItem(storageKey);
                        
                        if (stored) {
                            const parsed = JSON.parse(stored);
                            const email = parsed?.user?.email?.toLowerCase();
                            console.log('checkAdminStatus() - email from storage:', email);
                            
                            if (email) {
                                this.user = parsed.user;
                                this.isAdmin = adminEmails.includes(email);
                                console.log('checkAdminStatus() - RESULTADO isAdmin:', this.isAdmin);
                                return;
                            }
                        }
                        
                        console.log('checkAdminStatus() - no session in storage');
                        this.isAdmin = false;
                    } catch (error) {
                        console.error('checkAdminStatus() - error:', error);
                        this.isAdmin = false;
                    }
                },
                
                openAccountModal() {
                    // Disparar evento personalizado para abrir el modal
                    document.dispatchEvent(new CustomEvent('open-account-modal'));
                },
                
                openAdminPanel() {
                    // Abrir modal y scrollear al panel de admin
                    document.dispatchEvent(new CustomEvent('open-account-modal'));
                    // Dar tiempo para que el modal se abra y luego scroll al panel admin
                    setTimeout(() => {
                        const adminPanel = document.getElementById('admin-panel');
                        if (adminPanel) {
                            adminPanel.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }
                    }, 400);
                }
            }
        }
        
        // Data para sección de Reservas
        function reservasData() {
            return {
                services: [],
                selectedServiceId: null,
                selectedSlot: null,
                calendar: null,
                user: null,
                bookingLoading: false,
                bookingMessage: '',
                bookingSuccess: false,
                
                async init() {
                    // Inicializar Supabase
                    await window.odinGymSupabase?.initSupabase();
                    
                    // Obtener usuario actual
                    this.user = await window.odinGymSupabase?.getCurrentUser();
                    
                    // Escuchar cambios de autenticación
                    window.odinGymSupabase?.onAuthStateChange(async (event, session) => {
                        this.user = session?.user || null;
                    });
                    
                    // Cargar servicios
                    await this.loadServices();
                },
                
                async loadServices() {
                    const result = await window.odinGymSupabase?.getServices();
                    if (result?.success) {
                        this.services = result.data || [];
                    }
                },
                
                async loadServiceSlots() {
                    if (!this.selectedServiceId) {
                        if (this.calendar) {
                            this.calendar.destroy();
                            this.calendar = null;
                        }
                        return;
                    }
                    
                    // Inicializar calendario
                    const calendarEl = document.getElementById('calendar');
                    if (!calendarEl) return;
                    
                    // Obtener slots disponibles
                    const startDate = new Date();
                    const endDate = new Date();
                    endDate.setMonth(endDate.getMonth() + 2); // 2 meses adelante
                    
                    const result = await window.odinGymSupabase?.getAvailableSlots(
                        this.selectedServiceId,
                        startDate,
                        endDate
                    );
                    
                    if (result?.success) {
                        const slots = result.data || [];
                        
                        // Configurar eventos para FullCalendar
                        const events = slots.map(slot => ({
                            id: slot.id,
                            title: 'Disponible',
                            start: slot.date_time,
                            backgroundColor: '#F2C94C',
                            borderColor: '#E6B821',
                            textColor: '#000000',
                            extendedProps: {
                                slot: slot
                            }
                        }));
                        
                        // Crear calendario
                        this.calendar = new FullCalendar.Calendar(calendarEl, {
                            initialView: 'dayGridMonth',
                            locale: 'es',
                            headerToolbar: {
                                left: 'prev,next today',
                                center: 'title',
                                right: 'dayGridMonth,timeGridWeek,timeGridDay'
                            },
                            events: events,
                            eventClick: (info) => {
                                this.selectedSlot = info.event.extendedProps.slot;
                                this.bookingMessage = '';
                            },
                            eventDisplay: 'block',
                            height: 'auto'
                        });
                        
                        this.calendar.render();
                    }
                },
                
                async confirmBooking() {
                    if (!this.selectedSlot || !this.user) {
                        this.bookingMessage = 'Debes iniciar sesión para realizar una reserva';
                        this.bookingSuccess = false;
                        return;
                    }
                    
                    this.bookingLoading = true;
                    this.bookingMessage = '';
                    
                    const result = await window.odinGymSupabase?.createBooking(
                        this.selectedServiceId,
                        this.selectedSlot.id
                    );
                    
                    this.bookingLoading = false;
                    
                    if (result?.success) {
                        this.bookingMessage = result.message || 'Reserva confirmada exitosamente';
                        this.bookingSuccess = true;
                        this.selectedSlot = null;
                        
                        // Recargar slots
                        setTimeout(() => {
                            this.loadServiceSlots();
                        }, 1000);
                    } else {
                        this.bookingMessage = result?.error || 'Error al confirmar la reserva';
                        this.bookingSuccess = false;
                    }
                },
                
                formatDate(dateString) {
                    if (!dateString) return '';
                    const date = new Date(dateString);
                    return date.toLocaleDateString('es-CL', { 
                        weekday: 'long', 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric' 
                    });
                },
                
                formatTime(dateString) {
                    if (!dateString) return '';
                    const date = new Date(dateString);
                    return date.toLocaleTimeString('es-CL', { 
                        hour: '2-digit', 
                        minute: '2-digit' 
                    });
                }
            }
        }
        
        // Data para sección Mi Cuenta
        function cuentaData() {
            return {
                modalOpen: false,
                user: null,
                authTab: 'login',
                authLoading: false,
                authMessage: '',
                authSuccess: false,
                loginForm: {
                    email: '',
                    password: ''
                },
                signupForm: {
                    email: '',
                    password: ''
                },
                showForgotPassword: false,
                forgotPasswordForm: {
                    email: ''
                },
                forgotPasswordLoading: false,
                forgotPasswordMessage: '',
                forgotPasswordSuccess: false,
                showPasswordReset: false,
                passwordResetForm: {
                    newPassword: '',
                    confirmPassword: ''
                },
                passwordResetLoading: false,
                passwordResetMessage: '',
                passwordResetSuccess: false,
                bookings: [],
                loadingBookings: false,
                selectedSlot: null,
                calendar: null,
                bookingLoading: false,
                bookingMessage: '',
                bookingSuccess: false,
                selectedServiceId: null,
                services: [],
                // Nuevas propiedades para el calendario mejorado
                calendarLoading: false,
                calendarError: null,
                slotsCount: 0,
                allSlots: [],
                selectedDate: null,
                availableHoursForDay: [],
                showChangePassword: false,
                changePasswordForm: {
                    newPassword: '',
                    confirmPassword: ''
                },
                changePasswordLoading: false,
                changePasswordMessage: '',
                changePasswordSuccess: false,
                // Propiedades de administración
                isAdmin: false,
                adminLoading: false,
                adminBookings: [],
                adminStats: {
                    total: 0,
                    confirmed: 0,
                    cancelled: 0,
                    completed: 0,
                    thisWeek: 0,
                    upcoming: 0
                },
                adminFilter: {
                    status: ''
                },
                
                openModal() {
                    this.modalOpen = true;
                    document.body.style.overflow = 'hidden';
                    
                    // Verificar admin status al abrir modal
                    this.checkAdminStatus();
                    
                    // Si el usuario está logueado, cargar slots automáticamente
                    if (this.user) {
                        // Pequeño delay para que el modal termine de abrirse
                        setTimeout(() => {
                            this.loadClasePruebaSlots();
                        }, 50);
                    }
                },
                
                closeModal() {
                    this.modalOpen = false;
                    document.body.style.overflow = '';
                },
                
                async init() {
                    console.log('cuentaData init() ejecutándose...');
                    
                    // Escuchar evento para abrir modal PRIMERO (sin esperar Supabase)
                    document.addEventListener('open-account-modal', () => {
                        console.log('Evento open-account-modal recibido');
                        this.openModal();
                    });
                    
                    // Escuchar evento para abrir modal de recuperación de contraseña
                    document.addEventListener('open-password-reset', () => {
                        console.log('Evento open-password-reset recibido');
                        this.openModal();
                        this.showPasswordReset = true;
                        this.authTab = 'login'; // Asegurar que estamos en la pestaña de login
                    });
                    
                    // Escuchar evento para mostrar error de recuperación
                    document.addEventListener('password-reset-error', (event) => {
                        console.log('Evento password-reset-error recibido:', event.detail);
                        this.openModal();
                        this.showForgotPassword = true;
                        this.authTab = 'login';
                        this.forgotPasswordForm.email = '';
                        this.forgotPasswordMessage = event.detail.errorDescription || 'El enlace de recuperación es inválido o ha expirado. Por favor, solicita un nuevo enlace.';
                        this.forgotPasswordSuccess = false;
                    });
                    
                    // Inicializar Supabase
                    try {
                        await window.odinGymSupabase?.initSupabase();
                        
                        // Obtener usuario actual
                        this.user = await window.odinGymSupabase?.getCurrentUser();
                        
                        // Si hay usuario después de la recuperación, mostrar formulario de cambio
                        if (this.user) {
                            const hashParams = new URLSearchParams(window.location.hash.substring(1));
                            const type = hashParams.get('type');
                            if (type === 'recovery') {
                                this.showPasswordReset = true;
                                this.openModal();
                            }
                        }
                        
                        // Escuchar cambios de autenticación
                        window.odinGymSupabase?.onAuthStateChange(async (event, session) => {
                            this.user = session?.user || null;
                            if (this.user) {
                                await this.loadBookings();
                                await this.loadClasePruebaSlots();
                                await this.checkAdminStatus();
                            } else {
                                this.bookings = [];
                                this.isAdmin = false;
                                this.adminBookings = [];
                            }
                        });
                        
                        // Cargar reservas si hay usuario
                        if (this.user) {
                            await this.loadBookings();
                            await this.loadClasePruebaSlots();
                            await this.checkAdminStatus();
                        }
                    } catch (error) {
                        console.error('Error en init de cuentaData:', error);
                    }
                    
                    console.log('cuentaData init() completado');
                },
                
                async handleLoginSubmit() {
                    this.authLoading = true;
                    this.authMessage = '';
                    
                    const result = await window.odinGymSupabase?.handleLogin(
                        this.loginForm.email,
                        this.loginForm.password
                    );
                    
                    this.authLoading = false;
                    
                    if (result?.success) {
                        this.authMessage = result.message || 'Login exitoso';
                        this.authSuccess = true;
                        this.user = await window.odinGymSupabase?.getCurrentUser();
                        this.loginForm = { email: '', password: '' };
                        await this.loadBookings();
                        // Cargar slots de clase de prueba
                        await this.loadClasePruebaSlots();
                    } else {
                        this.authMessage = result?.error || 'Error al iniciar sesión';
                        this.authSuccess = false;
                    }
                },
                
                async handleSignupSubmit() {
                    this.authLoading = true;
                    this.authMessage = '';
                    
                    const result = await window.odinGymSupabase?.handleSignup(
                        this.signupForm.email,
                        this.signupForm.password
                    );
                    
                    this.authLoading = false;
                    
                    if (result?.success) {
                        this.authMessage = result.message || 'Registro exitoso. Verifica tu email.';
                        this.authSuccess = true;
                        this.signupForm = { email: '', password: '' };
                    } else {
                        this.authMessage = result?.error || 'Error al registrarse';
                        this.authSuccess = false;
                    }
                },
                
                async handleMagicLinkSubmit() {
                    if (!this.loginForm.email) {
                        this.authMessage = 'Ingresa tu email';
                        this.authSuccess = false;
                        return;
                    }
                    
                    this.authLoading = true;
                    this.authMessage = '';
                    
                    const result = await window.odinGymSupabase?.handleMagicLink(this.loginForm.email);
                    
                    this.authLoading = false;
                    
                    if (result?.success) {
                        this.authMessage = result.message || 'Revisa tu email para el enlace de acceso';
                        this.authSuccess = true;
                    } else {
                        this.authMessage = result?.error || 'Error al enviar enlace mágico';
                        this.authSuccess = false;
                    }
                },
                
                async handleForgotPasswordSubmit() {
                    if (!this.forgotPasswordForm.email) {
                        this.forgotPasswordMessage = 'Ingresa tu email';
                        this.forgotPasswordSuccess = false;
                        return;
                    }
                    
                    this.forgotPasswordLoading = true;
                    this.forgotPasswordMessage = '';
                    
                    const result = await window.odinGymSupabase?.resetPassword(this.forgotPasswordForm.email);
                    
                    this.forgotPasswordLoading = false;
                    
                    if (result?.success) {
                        this.forgotPasswordMessage = result.message || 'Revisa tu email para el enlace de recuperación de contraseña';
                        this.forgotPasswordSuccess = true;
                        // Limpiar formulario después de 3 segundos y volver al login
                        setTimeout(() => {
                            this.showForgotPassword = false;
                            this.forgotPasswordForm.email = '';
                            this.forgotPasswordMessage = '';
                        }, 3000);
                    } else {
                        this.forgotPasswordMessage = result?.error || 'Error al enviar email de recuperación';
                        this.forgotPasswordSuccess = false;
                    }
                },
                
                async handlePasswordResetSubmit() {
                    // Validar que las contraseñas coincidan
                    if (this.passwordResetForm.newPassword !== this.passwordResetForm.confirmPassword) {
                        this.passwordResetMessage = 'Las contraseñas no coinciden';
                        this.passwordResetSuccess = false;
                        return;
                    }
                    
                    // Validar longitud mínima
                    if (this.passwordResetForm.newPassword.length < 6) {
                        this.passwordResetMessage = 'La contraseña debe tener al menos 6 caracteres';
                        this.passwordResetSuccess = false;
                        return;
                    }
                    
                    this.passwordResetLoading = true;
                    this.passwordResetMessage = '';
                    
                    const result = await window.odinGymSupabase?.updatePassword(
                        this.passwordResetForm.newPassword
                    );
                    
                    this.passwordResetLoading = false;
                    
                    if (result?.success) {
                        this.passwordResetMessage = result.message || 'Contraseña actualizada exitosamente. Ya puedes iniciar sesión.';
                        this.passwordResetSuccess = true;
                        // Limpiar formulario
                        this.passwordResetForm = { newPassword: '', confirmPassword: '' };
                        // Ocultar formulario después de 2 segundos y mostrar login
                        setTimeout(() => {
                            this.showPasswordReset = false;
                            this.passwordResetMessage = '';
                            // El usuario ya está logueado, así que se mostrará su perfil
                        }, 2000);
                    } else {
                        this.passwordResetMessage = result?.error || 'Error al cambiar la contraseña';
                        this.passwordResetSuccess = false;
                    }
                },
                
                async handleChangePasswordSubmit() {
                    // Validar que las contraseñas coincidan
                    if (this.changePasswordForm.newPassword !== this.changePasswordForm.confirmPassword) {
                        this.changePasswordMessage = 'Las contraseñas no coinciden';
                        this.changePasswordSuccess = false;
                        return;
                    }
                    
                    // Validar longitud mínima
                    if (this.changePasswordForm.newPassword.length < 6) {
                        this.changePasswordMessage = 'La contraseña debe tener al menos 6 caracteres';
                        this.changePasswordSuccess = false;
                        return;
                    }
                    
                    this.changePasswordLoading = true;
                    this.changePasswordMessage = '';
                    
                    const result = await window.odinGymSupabase?.updatePassword(
                        this.changePasswordForm.newPassword
                    );
                    
                    this.changePasswordLoading = false;
                    
                    if (result?.success) {
                        this.changePasswordMessage = result.message || 'Contraseña actualizada exitosamente';
                        this.changePasswordSuccess = true;
                        // Limpiar formulario
                        this.changePasswordForm = { newPassword: '', confirmPassword: '' };
                        // Ocultar formulario después de 2 segundos
                        setTimeout(() => {
                            this.showChangePassword = false;
                            this.changePasswordMessage = '';
                        }, 2000);
                    } else {
                        this.changePasswordMessage = result?.error || 'Error al cambiar la contraseña';
                        this.changePasswordSuccess = false;
                    }
                },
                
                async handleLogoutClick() {
                    const result = await window.odinGymSupabase?.handleLogout();
                    if (result?.success) {
                        this.user = null;
                        this.bookings = [];
                        this.authMessage = result.message || 'Sesión cerrada';
                        this.authSuccess = true;
                    }
                },
                
                async loadBookings() {
                    this.loadingBookings = true;
                    const result = await window.odinGymSupabase?.getUserBookings();
                    this.loadingBookings = false;
                    
                    if (result?.success) {
                        this.bookings = result.data || [];
                    }
                },
                
                async cancelBookingClick(bookingId) {
                    if (!confirm('¿Estás seguro de que deseas cancelar esta reserva?')) {
                        return;
                    }
                    
                    const result = await window.odinGymSupabase?.cancelBooking(bookingId);
                    
                    if (result?.success) {
                        await this.loadBookings();
                        alert('Reserva cancelada exitosamente');
                    } else {
                        alert(result?.error || 'Error al cancelar la reserva');
                    }
                },
                
                // ============================================
                // FUNCIONES DE ADMINISTRACIÓN
                // ============================================
                
                async checkAdminStatus() {
                    console.log('cuentaData.checkAdminStatus() - iniciando...');
                    const adminEmails = ['allewmella@gmail.com', 'admin@odingym.cl'];
                    
                    try {
                        // Obtener email de localStorage directamente (evita cuelgues)
                        const storageKey = 'sb-fdzhfflvmhwcbzzrqent-auth-token';
                        const stored = localStorage.getItem(storageKey);
                        
                        if (stored) {
                            const parsed = JSON.parse(stored);
                            const email = parsed?.user?.email?.toLowerCase();
                            console.log('cuentaData.checkAdminStatus() - email:', email);
                            
                            if (email && adminEmails.includes(email)) {
                                this.isAdmin = true;
                                console.log('cuentaData - Usuario es administrador, cargando datos...');
                                await this.loadAdminData();
                                return;
                            }
                        }
                        
                        this.isAdmin = false;
                    } catch (error) {
                        console.error('cuentaData.checkAdminStatus() - error:', error);
                        this.isAdmin = false;
                    }
                },
                
                async loadAdminData() {
                    await Promise.all([
                        this.loadAdminStats(),
                        this.loadAdminBookings()
                    ]);
                },
                
                async loadAdminStats() {
                    console.log('loadAdminStats() - iniciando...');
                    try {
                        // Obtener sesión de localStorage
                        const storageKey = 'sb-fdzhfflvmhwcbzzrqent-auth-token';
                        const stored = localStorage.getItem(storageKey);
                        if (!stored) return;
                        
                        const parsed = JSON.parse(stored);
                        const accessToken = parsed?.access_token;
                        
                        const response = await fetch('https://fdzhfflvmhwcbzzrqent.supabase.co/rest/v1/bookings?select=id,status,created_at,slots(date_time)', {
                            headers: {
                                'apikey': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZkemhmZmx2bWh3Y2J6enJxZW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwMjE3MTMsImV4cCI6MjA4MTU5NzcxM30.1qCfEj_mOz0iPEu1_NlO06DvPuSsyjEKPkY1PNLmLXo',
                                'Authorization': `Bearer ${accessToken}`,
                                'Content-Type': 'application/json'
                            }
                        });
                        
                        if (response.ok) {
                            const bookings = await response.json();
                            const now = new Date();
                            const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
                            
                            this.adminStats = {
                                total: bookings.length,
                                confirmed: bookings.filter(b => b.status === 'confirmed').length,
                                cancelled: bookings.filter(b => b.status === 'cancelled').length,
                                completed: bookings.filter(b => b.status === 'completed').length,
                                thisWeek: bookings.filter(b => new Date(b.created_at) >= weekAgo).length,
                                upcoming: bookings.filter(b => {
                                    const slotDate = b.slots?.date_time ? new Date(b.slots.date_time) : null;
                                    return slotDate && slotDate >= now && b.status === 'confirmed';
                                }).length
                            };
                            console.log('loadAdminStats() - stats:', this.adminStats);
                        }
                    } catch (error) {
                        console.error('loadAdminStats() - error:', error);
                    }
                },
                
                async loadAdminBookings() {
                    console.log('loadAdminBookings() - iniciando...');
                    this.adminLoading = true;
                    
                    try {
                        const storageKey = 'sb-fdzhfflvmhwcbzzrqent-auth-token';
                        const stored = localStorage.getItem(storageKey);
                        if (!stored) {
                            this.adminLoading = false;
                            return;
                        }
                        
                        const parsed = JSON.parse(stored);
                        const accessToken = parsed?.access_token;
                        
                        let url = 'https://fdzhfflvmhwcbzzrqent.supabase.co/rest/v1/bookings?select=*,slots(id,date_time),services(id,name)&order=created_at.desc';
                        
                        if (this.adminFilter.status) {
                            url += `&status=eq.${this.adminFilter.status}`;
                        }
                        
                        const response = await fetch(url, {
                            headers: {
                                'apikey': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZkemhmZmx2bWh3Y2J6enJxZW50Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwMjE3MTMsImV4cCI6MjA4MTU5NzcxM30.1qCfEj_mOz0iPEu1_NlO06DvPuSsyjEKPkY1PNLmLXo',
                                'Authorization': `Bearer ${accessToken}`,
                                'Content-Type': 'application/json'
                            }
                        });
                        
                        this.adminLoading = false;
                        
                        if (response.ok) {
                            this.adminBookings = await response.json();
                            console.log('loadAdminBookings() - bookings:', this.adminBookings.length);
                        } else {
                            console.error('loadAdminBookings() - error response:', response.status);
                        }
                    } catch (error) {
                        console.error('loadAdminBookings() - error:', error);
                        this.adminLoading = false;
                    }
                },
                
                async markAsCompleted(bookingId) {
                    if (!confirm('¿Marcar esta reserva como completada?')) return;
                    
                    const result = await window.odinGymSupabase?.updateBookingStatus(bookingId, 'completed');
                    if (result?.success) {
                        await this.loadAdminData();
                    } else {
                        alert(result?.error || 'Error al actualizar');
                    }
                },
                
                async adminCancelBooking(bookingId) {
                    if (!confirm('¿Cancelar esta reserva?')) return;
                    
                    const result = await window.odinGymSupabase?.updateBookingStatus(bookingId, 'cancelled');
                    if (result?.success) {
                        await this.loadAdminData();
                    } else {
                        alert(result?.error || 'Error al cancelar');
                    }
                },
                
                formatDate(dateString) {
                    if (!dateString) return '';
                    const date = new Date(dateString);
                    return date.toLocaleDateString('es-CL', { 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric' 
                    });
                },
                
                formatTime(dateString) {
                    if (!dateString) return '';
                    const date = new Date(dateString);
                    return date.toLocaleTimeString('es-CL', { 
                        hour: '2-digit', 
                        minute: '2-digit' 
                    });
                },
                
                async loadClasePruebaSlots() {
                    console.log('loadClasePruebaSlots() iniciando...');
                    
                    // Resetear estados
                    this.calendarLoading = true;
                    this.calendarError = null;
                    this.slotsCount = 0;
                    this.allSlots = [];
                    this.selectedDate = null;
                    this.availableHoursForDay = [];
                    this.selectedSlot = null;
                    
                    try {
                        // Buscar el servicio directamente (sin llamar a initBookingSystem)
                        if (!this.selectedServiceId) {
                            console.log('loadClasePruebaSlots() - Buscando servicios...');
                            const servicesResult = await window.odinGymSupabase?.getServices();
                            console.log('loadClasePruebaSlots() - Servicios resultado:', servicesResult);
                            
                            if (!servicesResult?.success) {
                                this.calendarError = servicesResult?.error || 'Error al cargar servicios. Verifica tu conexión.';
                                this.calendarLoading = false;
                                return;
                            }
                            
                            if (!servicesResult.data || servicesResult.data.length === 0) {
                                this.calendarError = 'No hay servicios configurados. Contacta al administrador.';
                                this.calendarLoading = false;
                                return;
                            }
                            
                            // Buscar servicio de clase de prueba/regalo o usar el primero
                            let clasePrueba = servicesResult.data.find(s => 
                                s.name.toLowerCase().includes('prueba') || 
                                s.name.toLowerCase().includes('regalo')
                            ) || servicesResult.data[0];
                            
                            this.selectedServiceId = clasePrueba.id;
                            console.log('loadClasePruebaSlots() - Servicio seleccionado:', clasePrueba.name, clasePrueba.id);
                        }
                        
                        // Obtener slots disponibles
                        console.log('loadClasePruebaSlots() - Buscando slots para:', this.selectedServiceId);
                        const startDate = new Date();
                        const endDate = new Date();
                        endDate.setMonth(endDate.getMonth() + 2);
                        
                        const result = await window.odinGymSupabase?.getAvailableSlots(
                            this.selectedServiceId,
                            startDate,
                            endDate
                        );
                        
                        console.log('Resultado de slots:', result);
                        
                        if (!result?.success) {
                            this.calendarError = result?.error || 'Error al cargar horarios disponibles';
                            this.calendarLoading = false;
                            return;
                        }
                        
                        this.allSlots = result.data || [];
                        this.slotsCount = this.allSlots.length;
                        console.log('Slots disponibles:', this.slotsCount);
                        
                        this.calendarLoading = false;
                        
                        if (this.slotsCount === 0) {
                            return;
                        }
                        
                        // Esperar un momento para que el DOM se actualice
                        await this.$nextTick();
                        
                        // Inicializar calendario
                        this.initCalendar();
                        
                    } catch (error) {
                        console.error('Error en loadClasePruebaSlots:', error);
                        this.calendarError = 'Error de conexión. Por favor, intenta de nuevo.';
                        this.calendarLoading = false;
                    }
                },
                
                initCalendar() {
                    const calendarEl = document.getElementById('calendar');
                    if (!calendarEl) {
                        console.log('Elemento #calendar no encontrado');
                        return;
                    }
                    
                    // Destruir calendario existente
                    if (this.calendar) {
                        this.calendar.destroy();
                        this.calendar = null;
                    }
                    
                    // Agrupar slots por fecha para mostrar indicadores en el calendario
                    const slotsByDate = {};
                    this.allSlots.forEach(slot => {
                        const date = slot.date_time.split('T')[0];
                        if (!slotsByDate[date]) {
                            slotsByDate[date] = [];
                        }
                        slotsByDate[date].push(slot);
                    });
                    
                    // Crear eventos para el calendario (un evento por día con slots disponibles)
                    const events = Object.keys(slotsByDate).map(date => ({
                        id: date,
                        title: `${slotsByDate[date].length} disponibles`,
                        start: date,
                        allDay: true,
                        backgroundColor: '#F2C94C',
                        borderColor: '#E6B821',
                        textColor: '#000000',
                        display: 'block',
                        extendedProps: {
                            slots: slotsByDate[date],
                            count: slotsByDate[date].length
                        }
                    }));
                    
                    console.log('initCalendar() - Eventos creados:', events.length);
                    
                    // Crear calendario con vista mensual
                    this.calendar = new FullCalendar.Calendar(calendarEl, {
                        initialView: 'dayGridMonth',
                        locale: 'es',
                        headerToolbar: {
                            left: 'prev,next today',
                            center: 'title',
                            right: ''
                        },
                        buttonText: {
                            today: 'Hoy'
                        },
                        events: events,
                        eventClick: (info) => {
                            info.jsEvent.preventDefault();
                            this.selectDate(info.event.extendedProps.slots, info.event.startStr);
                        },
                        dateClick: (info) => {
                            const daySlots = slotsByDate[info.dateStr];
                            if (daySlots && daySlots.length > 0) {
                                this.selectDate(daySlots, info.dateStr);
                            }
                        },
                        eventDisplay: 'block',
                        height: 'auto',
                        fixedWeekCount: false,
                        showNonCurrentDates: true,
                        dayMaxEvents: 1,
                        moreLinkClick: 'day',
                        dayCellClassNames: (arg) => {
                            const dateStr = arg.date.toISOString().split('T')[0];
                            if (slotsByDate[dateStr]) {
                                return ['has-slots'];
                            }
                            return [];
                        }
                    });
                    
                    this.calendar.render();
                    
                    // Forzar actualización de tamaño después de que el modal esté visible
                    setTimeout(() => {
                        if (this.calendar) {
                            this.calendar.updateSize();
                            console.log('initCalendar() - Tamaño actualizado');
                        }
                    }, 100);
                    
                    console.log('initCalendar() - Calendario renderizado');
                },
                
                selectDate(slots, dateStr) {
                    this.selectedDate = dateStr;
                    this.availableHoursForDay = slots.sort((a, b) => 
                        new Date(a.date_time) - new Date(b.date_time)
                    );
                    this.selectedSlot = null;
                    this.bookingMessage = '';
                },
                
                selectSlot(slot) {
                    this.selectedSlot = slot;
                    this.bookingMessage = '';
                },
                
                async confirmBooking() {
                    if (!this.selectedSlot || !this.user) {
                        this.bookingMessage = 'Debes iniciar sesión para realizar una reserva';
                        this.bookingSuccess = false;
                        return;
                    }
                    
                    if (!this.selectedServiceId) {
                        // Buscar el servicio de clase de prueba
                        const servicesResult = await window.odinGymSupabase?.getServices();
                        if (servicesResult?.success && servicesResult.data) {
                            const clasePrueba = servicesResult.data.find(s => 
                                s.name.toLowerCase().includes('prueba') || 
                                s.name.toLowerCase().includes('regalo')
                            );
                            if (clasePrueba) {
                                this.selectedServiceId = clasePrueba.id;
                            }
                        }
                    }
                    
                    if (!this.selectedServiceId) {
                        this.bookingMessage = 'Error: No se encontró el servicio de clase de prueba';
                        this.bookingSuccess = false;
                        return;
                    }
                    
                    this.bookingLoading = true;
                    this.bookingMessage = '';
                    
                    const result = await window.odinGymSupabase?.createBooking(
                        this.selectedServiceId,
                        this.selectedSlot.id
                    );
                    
                    this.bookingLoading = false;
                    
                    if (result?.success) {
                        this.bookingMessage = result.message || '¡Reserva confirmada! Te esperamos en ODIN GYM.';
                        this.bookingSuccess = true;
                        this.selectedSlot = null;
                        this.selectedDate = null;
                        this.availableHoursForDay = [];
                        
                        // Recargar reservas y slots
                        await this.loadBookings();
                        setTimeout(() => {
                            this.loadClasePruebaSlots();
                        }, 1000);
                    } else {
                        this.bookingMessage = result?.error || 'Error al confirmar la reserva';
                        this.bookingSuccess = false;
                    }
                }
            }
        }
        
        // Intersection Observer for animations
        document.addEventListener('DOMContentLoaded', () => {
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-fade-in');
                    }
                });
            }, observerOptions);
            
            document.querySelectorAll('section > div').forEach(el => {
                observer.observe(el);
            });
            
            // Inicializar LightGallery
            const gallery = document.getElementById('gallery');
            if (gallery && typeof lightGallery !== 'undefined') {
                lightGallery(gallery, {
                    selector: '.gallery-item',
                    speed: 500,
                    download: false,
                    counter: true,
                    plugins: [lgThumbnail, lgZoom],
                    thumbnail: true,
                    zoom: true,
                    actualSize: true,
                    actualSizeIcons: {
                        zoomIn: '<i class="fas fa-search-plus"></i>',
                        zoomOut: '<i class="fas fa-search-minus"></i>'
                    }
                });
            }
            
            // Manejo del video Vimeo con focus
            const iframe = document.getElementById('hero-vimeo-player');
            if (iframe && typeof Vimeo !== 'undefined') {
                const player = new Vimeo.Player(iframe);
                
                // Configurar el video con audio al cargar
                player.ready().then(() => {
                    console.log('Vimeo player listo');
                    
                    // Intentar desmutear y reproducir con audio
                    player.setMuted(false).catch(() => {
                        console.log('No se pudo desmutear automáticamente (política del navegador)');
                    });
                    
                    // Establecer volumen inicial (75% - aumentado en 50%)
                    player.setVolume(0.75).catch(() => {});
                    
                    // Intentar reproducir
                    player.play().catch((error) => {
                        console.log('Autoplay con audio bloqueado. El usuario debe interactuar primero.');
                        // Si falla, esperar a que el usuario interactúe
                        const enableAudio = () => {
                            player.setMuted(false).catch(() => {});
                            player.setVolume(0.75).catch(() => {});
                            player.play().catch(() => {});
                            document.removeEventListener('click', enableAudio);
                            document.removeEventListener('touchstart', enableAudio);
                        };
                        document.addEventListener('click', enableAudio, { once: true });
                        document.addEventListener('touchstart', enableAudio, { once: true });
                    });
                }).catch(err => {
                    console.error('Error inicializando Vimeo player:', err);
                });
                
                // Función para manejar el focus y el sonido
                const handleFocus = () => {
                    player.setMuted(false).catch(() => {});
                    player.setVolume(0.75).catch(() => {});
                    player.play().catch(() => {});
                };
                
                const handleBlur = () => {
                    // Mantener el audio pero reducir volumen cuando pierde focus
                    player.setVolume(0.4).catch(() => {});
                };
                
                // Verificar si la página tiene focus al cargar
                if (document.hasFocus()) {
                    handleFocus();
                }
                
                // Escuchar cambios de focus
                window.addEventListener('focus', handleFocus);
                window.addEventListener('blur', handleBlur);
            }
            
            // Manejo del video de la Comunidad - Solo reproduce cuando está visible
            const comunidadIframe = document.getElementById('comunidad-vimeo-player');
            if (comunidadIframe && typeof Vimeo !== 'undefined') {
                const comunidadPlayer = new Vimeo.Player(comunidadIframe);
                let comunidadPlayerReady = false;
                let comunidadIsPlaying = false;
                
                // Configurar el video pero NO reproducir automáticamente
                comunidadPlayer.ready().then(() => {
                    comunidadPlayerReady = true;
                    console.log('Vimeo player comunidad listo (esperando visibilidad)');
                    
                    // Configurar volumen pero no reproducir aún
                    comunidadPlayer.setVolume(0.75).catch(() => {});
                    comunidadPlayer.setMuted(false).catch(() => {});
                }).catch(err => {
                    console.error('Error inicializando Vimeo player comunidad:', err);
                });
                
                // Intersection Observer para detectar cuando el video está visible
                const comunidadObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting && comunidadPlayerReady && !comunidadIsPlaying) {
                            // El video está visible, iniciar reproducción
                            comunidadPlayer.play().then(() => {
                                comunidadIsPlaying = true;
                                comunidadPlayer.setMuted(false).catch(() => {});
                                comunidadPlayer.setVolume(0.75).catch(() => {});
                                console.log('Video comunidad iniciado (visible en pantalla)');
                            }).catch((error) => {
                                console.log('No se pudo reproducir automáticamente, esperando interacción del usuario');
                                // Si falla, esperar a que el usuario interactúe
                                const enableAudio = () => {
                                    comunidadPlayer.setMuted(false).catch(() => {});
                                    comunidadPlayer.setVolume(0.75).catch(() => {});
                                    comunidadPlayer.play().catch(() => {});
                                    comunidadIsPlaying = true;
                                };
                                // Intentar cuando el usuario haga scroll o interactúe
                                const tryPlayOnInteraction = () => {
                                    if (entry.isIntersecting) {
                                        enableAudio();
                                        window.removeEventListener('scroll', tryPlayOnInteraction);
                                        document.removeEventListener('click', tryPlayOnInteraction);
                                        document.removeEventListener('touchstart', tryPlayOnInteraction);
                                    }
                                };
                                window.addEventListener('scroll', tryPlayOnInteraction, { once: true });
                                document.addEventListener('click', tryPlayOnInteraction, { once: true });
                                document.addEventListener('touchstart', tryPlayOnInteraction, { once: true });
                            });
                        } else if (!entry.isIntersecting && comunidadIsPlaying) {
                            // El video no está visible, pausar
                            comunidadPlayer.pause().catch(() => {});
                            comunidadIsPlaying = false;
                            console.log('Video comunidad pausado (fuera de vista)');
                        }
                    });
                }, {
                    threshold: 0.5, // Reproducir cuando al menos el 50% está visible
                    rootMargin: '0px'
                });
                
                // Observar el contenedor del video
                const comunidadContainer = comunidadIframe.closest('.vp-video-comunidad');
                if (comunidadContainer) {
                    comunidadObserver.observe(comunidadContainer);
                }
            }
        });
    </script>
</body>
</html>

